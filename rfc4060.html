<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title></title>
  <link rel="stylesheet" href="static/css/rfc.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1></h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-'>
      <td class=docs>
        <p class="rfcparagraph"><p>Network Working Group                                             Q. Xie<br>Request for Comments: 4060                                     D. Pearce<br>Category: Standards Track                                       Motorola<br>                                                                May 2005<br><br></p>
                  <h1>
          RTP Payload Formats for European Telecommunications
              Standards Institute (ETSI) European Standard
                 ES 202 050, ES 202 211, and ES 202 212
                Distributed Speech Recognition Encoding</h1>
                  <h2>Status of This Memo</h2>

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

</p><p class="rfcparagraph"><h2>Copyright Notice</h2>

   Copyright (C) The Internet Society (2005).<br>

</p><p class="rfcparagraph"><h2>Abstract</h2>

   This document specifies RTP payload formats for encapsulating
   European Telecommunications Standards Institute (ETSI) European
   Standard ES 202 050 DSR Advanced Front-end (AFE), ES 202 211 DSR
   Extended Front-end (XFE), and ES 202 212 DSR Extended Advanced
   Front-end (XAFE) signal processing feature streams for distributed
   speech recognition (DSR) systems.
<h2>Table of Contents</h2>
<a href="#section-1" class="">1. Introduction ...................................................</a><br>
<a href="#section-1.1" class="indent-1">1.1. Conventions and Acronyms ..................................</a><br>
<a href="#section-2" class="">2. ETSI DSR Front-end Codecs ......................................</a><br>
<a href="#section-2.1" class="indent-1">2.1. ES 202 050 Advanced DSR Front-end Codec ...................</a><br>
<a href="#section-2.2" class="indent-1">2.2. ES 202 211 Extended DSR Front-end Codec ...................</a><br>
<a href="#section-2.3" class="indent-1">2.3. ES 202 212 Extended Advanced DSR Front-end Codec ..........</a><br>
<a href="#section-3" class="">3. DSR RTP Payload Formats ........................................</a><br>
      3.1. Common Considerations of the Three DSR RTP Payload
           Formats ....................................................6
<a href="#section-3.1.1" class="indent-2">3.1.1. Number of FPs in Each RTP Packet ...................</a><br>
<a href="#section-3.1.2" class="indent-2">3.1.2. Support for Discontinuous Transmission .............</a><br>
<a href="#section-3.1.3" class="indent-2">3.1.3. RTP Header Usage ...................................</a><br>
<a href="#section-3.2" class="indent-1">3.2. Payload Format for ES 202 050 DSR .........................</a><br>
<a href="#section-3.2.1" class="indent-2">3.2.1. Frame Pair Formats .................................</a><br>
<a href="#section-3.3" class="indent-1">3.3. Payload Format for ES 202 211 DSR .........................</a><br>
<a href="#section-3.3.1" class="indent-2">3.3.1. Frame Pair Formats .................................</a><br>
<a href="#section-3.4" class="indent-1">3.4. Payload Format for ES 202 212 DSR ........................</a><br>
<a href="#section-3.4.1" class="indent-2">3.4.1. Frame Pair Formats ................................</a><br>
<a href="#section-4" class="">4. IANA Considerations ...........................................</a><br>
<a href="#section-4.1" class="indent-1">4.1. Mapping MIME Parameters into SDP .........................</a><br>
<a href="#section-4.2" class="indent-1">4.2. Usage in Offer/Answer ....................................</a><br>
<a href="#section-4.3" class="indent-1">4.3. Congestion Control .......................................</a><br>
<a href="#section-5" class="">5. Security Considerations .......................................</a><br>
<a href="#section-6" class="">6. Acknowledgments ...............................................</a><br>
<a href="#section-7" class="">7. References ....................................................</a><br>
<a href="#section-7.1" class="indent-1">7.1. Normative References .....................................</a><br>
<a href="#section-7.2" class="indent-1">7.2. Informative References ...................................</a><br>

	<a name="section-1"><h2>1.   Introduction</h2></a>

   Distributed speech recognition (DSR) technology is intended for a
   remote device acting as a thin client (a.k.a. the front-end) to
   communicate with a speech recognition server (a.k.a. a speech
   engine), over a network connection to obtain speech recognition
   services.  More details on DSR over Internet can be found in RFC 3557
   [10].

</p><p class="rfcparagraph">   To achieve interoperability with different client devices and speech
   engines, the first ETSI standard DSR front-end ES 201 108 was
   published in early 2000 [11].  An RTP packetization for ES 201 108
   frames is defined in RFC 3557 [10] by IETF.

</p><p class="rfcparagraph">   In ES 202 050 [1], ETSI issues another standard for an Advanced DSR
   front-end that provides substantially improved recognition
   performance when background noise is present.  The codecs in ES 202
   050 use a slightly different frame format from that of ES 201 108 and
   thus the two do not inter-operate with each other.

</p><p class="rfcparagraph">   The RTP packetization for ES 202 050 front-end defined in this
   document uses the same RTP packet format layout as that defined in
   RFC 3557 [10].  The differences are in the DSR codec frame bit
   definition and the payload type MIME registration.

</p><p class="rfcparagraph">   The two further standards, ES 202 211 and ES 202 212, provide
   extensions to each of the DSR front-end standards.  The extensions
   allow the speech waveform to be reconstructed for human audition and
   can also be used to improve recognition performance for tonal
   languages.  This is done by sending additional pitch and voicing
   information for each frame along with the recognition features.

</p><p class="rfcparagraph">   The RTP packet format for these extended standards is also defined in
   this document.

</p><p class="rfcparagraph">   It is worthwhile to note that the performance of most speech
   recognizers are extremely sensitive to consecutive frame losses and
   DSR speech recognizers are no exception.  If a DSR over RTP session
   is expected to endure high packet loss ratio between the front-end
   and the speech engine, one should consider limiting the maximum
   number of DSR frames allowed in a packet, or employing other loss
   management techniques, such as FEC or interleaving, to minimize the
   chance of losing consecutive frames.

</p><p class="rfcparagraph">	<a name="section-1.1"><h3>1.1   Conventions and Acronyms</h3></a>

   The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD,
   SHOULD NOT, RECOMMENDED, NOT RECOMMENDED, MAY, and OPTIONAL, when
   they appear in this document, are to be interpreted as described in
   RFC 2119 [4].

</p><p class="rfcparagraph">   The following acronyms are used in this document:

</p><p class="rfcparagraph">      DSR  - Distributed Speech Recognition
      ETSI - the European Telecommunications Standards Institute
      FP   - Frame Pair
      DTX  - Discontinuous Transmission
      VAD  - Voice Activity Detection
	<a name="section-2"><h2>2.   ETSI DSR Front-end Codecs</h2></a>

   Some relevant characteristics of ES 202 050 Advanced, ES 202 211
   Extended, and ES 202 212 Extended Advanced DSR front-end codecs are
   summarized below.

</p><p class="rfcparagraph">	<a name="section-2.1"><h3>2.1   ES 202 050 Advanced DSR Front-end Codec</h3></a>

   The front-end calculation is a frame-based scheme that produces an
   output vector every 10 ms.  In the front-end feature extraction,
   noise reduction by two stages of Wiener filtering is performed first.
   Then, waveform processing is applied to the de-noised signal and
   mel-cepstral features are calculated.  At the end, blind equalization
   is applied to the cepstral features.  The front-end algorithm
   produces at its output a mel-cepstral representation in the same
   format as ES 210 108, i.e., 12 cepstral coefficients [C1 - C12], C0
   and log Energy.  Voice activity detection (VAD) for the
   classification of each frame as speech or non-speech is also
   implemented in Feature Extraction.  The VAD information is included
   in the payload format for each frame pair to be sent to the remote
   recognition engine as part of the payload.  This information may
   optionally be used by the receiving recognition engine to drop
   non-speech frames.  The front-end supports three raw sampling rates:
   8 kHz, 11 kHz, and 16 kHz (Note that unlike some other speech codecs,
   the feature frame size of DSR presented to RTP packetization is not
   dependent on the number of speech samples used in each 10 ms sample
   frame.  This will become more evident in the following sections).

</p><p class="rfcparagraph">   After calculation of the mel-cepstral representation, the
   representation is first quantized via split-vector quantization to
   reduce the data rate of the encoded stream.  Then, the quantized
   vectors from two consecutive frames are put into a FP, as described
   in more detail in Section 3.2.

</p><p class="rfcparagraph">	<a name="section-2.2"><h3>2.2   ES 202 211 Extended DSR Front-end Codec</h3></a>

   Some relevant characteristics of ES 202 211 Extended DSR front-end
   codec are summarized below.

</p><p class="rfcparagraph">   ES 202 211 is an extension of the mel-cepstrum DSR Front-end standard
   ES 201 108 [11].  The mel-cepstrum front-end provides the features
   for speech recognition but these are not available for human
   listening.  The purpose of the extension is allow the reconstruction
   of the speech waveform from these features so that they can be
   replayed.  The front-end feature extraction part of the processing is
   exactly the same as for ES 201 108.  To allow speech reconstruction
   additional fundamental frequency (perceived as pitch) and voicing
   class (e.g., non-speech, voiced, unvoiced and mixed) information is
   needed.  This extra information is provided by the extended front-end
   processing algorithms at the device side.  It is compressed and
   transmitted along with the front-end features to the server.  This
   extra information may also be useful for improved speech recognition
   performance with tonal languages such as Mandarin, Cantonese and
   Thai.

</p><p class="rfcparagraph">   Full information about the client side signal processing algorithms
   used in the standard are described in the specification ES 202 211
   [2].

</p><p class="rfcparagraph">   The additional fundamental frequency and voicing class information is
   compressed for each frame pair.  The pitch for the first frame of the
   FP is quantized to 7 bits and the second frame is differentially
   quantized to 7 bits.  The voicing class is indicated with one bit for
   each frame.  The total for the extension information for a frame pair
   therefore consists of 14 bits plus an additional 2 bits of CRC error
   protection computed over these extension bits only.

</p><p class="rfcparagraph">   The total information for the frame pair is made up of 92 bits for
   the two compressed front-end feature frames (including 4 bits for
   their CRC) plus 16 bits for the extension (including 2 bits for their
   CRC) and 4 bits of null padding to give a total of 14 octets per
   frame pair.  As for ES 201 208 the extended frame pair also
   corresponds to 20ms of speech.  The extended front-end supports three
   raw sampling rates: 8 kHz, 11 kHz, and 16 kHz.

</p><p class="rfcparagraph">   The quantized vectors from two consecutive frames are put into an FP,
   as described in more detail in Section 3.3 below.

</p><p class="rfcparagraph">   The parameters received at the remote server from the RTP extended
   DSR payload specified here can be used to synthesize an intelligible
   speech waveform for replay.  The algorithms to do this are described
   in the specification ES 202 211 [2].

</p><p class="rfcparagraph">	<a name="section-2.3"><h3>2.3   ES 202 212 Extended Advanced DSR Front-end Codec</h3></a>

   ES 202 212 is the extension for the DSR Advanced Front-end ES 202 050
   [1].  It provides the same capabilities as the extended mel-cepstrum
   front-end described in Section 2.2 but for the DSR Advanced
   Front-end.
	<a name="section-3"><h2>3.   DSR RTP Payload Formats</h2></a>

	<a name="section-3.1"><h3>3.1   Common Considerations of the Three DSR RTP Payload Formats</h3></a>

   The three DSR RTP payload formats defined in this document share the
   following consideration or behaviours.

</p><p class="rfcparagraph">	<a name="section-3.1.1"><h4>3.1.1   Number of FPs in Each RTP Packet</h4></a>

   Any number of FPs MAY be aggregate together in an RTP payload and
   they MUST be consecutive in time.  However, one SHOULD always keep
   the RTP payload size smaller than the MTU in order to avoid IP
   fragmentation and SHOULD follow the recommendations given in Section
   3.1 in RFC 3557 [10] when determining the proper number of FPs in an
   RTP payload.

</p><p class="rfcparagraph">	<a name="section-3.1.2"><h4>3.1.2   Support for Discontinuous Transmission</h4></a>

   Same considerations described in Section 3.2 of RFC 3557 [10] apply
   to all the three DSR RTP payloads defined in this document.

</p><p class="rfcparagraph">	<a name="section-3.1.3"><h4>3.1.3   RTP Header Usage</h4></a>

   The format of the RTP header is specified in RFC 3550 [8].  The three
   payload formats defined here use the fields of the header in a manner
   consistent with that specification.

</p><p class="rfcparagraph">   The RTP timestamp corresponds to the sampling instant of the first
   sample encoded for the first FP in the packet.  The timestamp clock
   frequency is the same as the sampling frequency, so the timestamp
   unit is in samples.

</p><p class="rfcparagraph">   As defined by all three front-end codecs, the duration of one FP is
   20 ms, corresponding to 160, 220, or 320 encoded samples with a
   sampling rate of 8, 11, or 16 kHz being used at the front-end,
   respectively.  Thus, the timestamp is increased by 160, 220, or 320
   for each consecutive FP, respectively.

</p><p class="rfcparagraph">   The DSR payload for all three front-end codecs is always an integral
   number of octets.  If additional padding is required for some other
   purpose, then the P bit in the RTP header may be set and padding
   appended as specified in RFC 3550 [8].

</p><p class="rfcparagraph">   The RTP header marker bit (M) MUST be set following the general rules
   for audio codecs, as defined in Section 4.1 in RFC 3551 [9].
   This document does not specify the assignment of an RTP payload type
   for these three new packet formats.  It is expected that the RTP
   profile under which any of these payload formats is being used will
   assign a payload type for this encoding or will specify that the
   payload type is to be bound dynamically.

</p><p class="rfcparagraph">	<a name="section-3.2"><h3>3.2   Payload Format for ES 202 050 DSR</h3></a>

   An ES 202 050 DSR RTP payload datagram uses exactly the same layout
   as defined in Section 3 of RFC 3557 [10], i.e., a standard RTP header
   followed by a DSR payload containing a series of DSR FPs.

</p><p class="rfcparagraph">   The size of each ES 202 050 FP remains 96 bits or 12 octets, as
   defined in the following sections.  This ensures that a DSR RTP
   payload will always end on an octet boundary.

</p><p class="rfcparagraph">	<a name="section-3.2.1"><h4>3.2.1   Frame Pair Formats</h4></a>

<a name="section-3.2.1.1"><h4>3.2.1.1   Format of Speech and Non-speech FPs</h4></a>
                        <a href="raw/text/rfc4060.txt" class="rawLink">raw</a>
                    

   The following mel-cepstral frame MUST be used, as defined in [1]:

</p><p class="rfcparagraph">   Pairs of the quantized 10ms mel-cepstral frames MUST be grouped
   together and protected with a 4-bit CRC forming a 92-bit long FP.  At
   the end, each FP MUST be padded with 4 zeros to the MSB 4 bits of the
   last octet in order to make the FP aligned to the octet boundary.

</p><p class="rfcparagraph">   The following diagram shows a complete ES 202 050 FP:

</p><p class="rfcparagraph">     Frame #1 in FP:
     ===============
        (MSB)                                     (LSB)
          0     1     2     3     4     5     6     7<pre>
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :  idx(2,3) |            idx(0,1)               |    Octet 1
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :       idx(4,5)        |     idx(2,3) (cont)   :    Octet 2
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |             idx(6,7)              |idx(4,5)(cont)  Octet 3
       +-----+-----+-----+-----+-----+-----+-----+-----+
   idx(10,11)| VAD |              idx(8,9)             |    Octet 4
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :       idx(12,13)      |   idx(10,11) (cont)   :    Octet 5
       +-----+-----+-----+-----+-----+-----+-----+-----+
                               |   idx(12,13) (cont)   :    Octet 6/1
                               +-----+-----+-----+-----+
    Frame #2 in FP:
    ===============
        (MSB)                                     (LSB)
          0     1     2     3     4     5     6     7
       +-----+-----+-----+-----+
       :        idx(0,1)       |                            Octet 6/2
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |              idx(2,3)             |idx(0,1)(cont)  Octet 7
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :  idx(6,7) |              idx(4,5)             |    Octet 8
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :        idx(8,9)       |      idx(6,7) (cont)  :    Octet 9
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |          idx(10,11)         | VAD |idx(8,9)(cont)  Octet 10
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |                   idx(12,13)                  |    Octet 11
       +-----+-----+-----+-----+-----+-----+-----+-----+


    CRC for Frame #1 and Frame #2 and padding in FP:
    ================================================
        (MSB)                                     (LSB)
          0     1     2     3     4     5     6     7
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |  0  |  0  |  0  |  0  |          CRC          |    Octet 12
       +-----+-----+-----+-----+-----+-----+-----+-----+

   The 4-bit CRC in the FP MUST be calculated using the formula
   (including the bit-order rules) defined in 7.2 in [1].

</p><p class="rfcparagraph">   Therefore, each FP represents 20ms of original speech.  Note that
   each FP MUST be padded with 4 zeros to the MSB 4 bits of the last
   octet in order to make the FP aligned to the octet boundary, as shown
   above.  This makes the total size of an FP 96 bits, or 12 octets.
   Note that this padding is separate from padding indicated by the P
   bit in the RTP header.

</p><p class="rfcparagraph">   The definition of the indices and 'VAD' flag are described in [1] and
   their value is only set and examined by the codecs in the front-end
   client and the recognizer.

</p><p class="rfcparagraph"><a name="section-3.2.1.2"><h4>3.2.1.2   Format of Null FP</h4></a>
                        <a href="raw/text/rfc4060.txt" class="rawLink">raw</a>
                    

   Null FPs are sent to mark the end of a transmission segment.  Details
   on transmission segment and the use of Null FPs can be found in RFC
   3557 [10].
   A Null FP for the ES 202 050 front-end codec is defined by setting
   the content of the first and second frame in the FP to null (i.e.,
   filling the first 88 bits of the FP with zeros).  The 4-bit CRC MUST
   be calculated the same way as described in Section 7.2.4 of [1], and
   4 zeros MUST be padded to the end of the Null FP in order to make it
   aligned to the octet boundary.

</p><p class="rfcparagraph">	<a name="section-3.3"><h3>3.3   Payload Format for ES 202 211 DSR</h3></a>

   An ES 202 211 DSR RTP payload datagram is very similar to that
   defined in Section 3 of RFC 3557 [10], i.e., a standard RTP header
   followed by a DSR payload containing a series of DSR FPs.

</p><p class="rfcparagraph">   The size of each ES 202 211 FP is 112 bits or 14 octets, as defined
   in the following sections.  This ensures that a DSR RTP payload will
   always end on an octet boundary.

</p><p class="rfcparagraph">	<a name="section-3.3.1"><h4>3.3.1   Frame Pair Formats</h4></a>

<a name="section-3.3.1.1"><h4>3.3.1.1   Format of Speech and Non-speech FPs</h4></a>
                        <a href="raw/text/rfc4060.txt" class="rawLink">raw</a>
                    

   The following mel-cepstral frame MUST be used, as defined in Section
   6.2.4 in [2]:

</p><p class="rfcparagraph">   Immediately following two frames (Frame #1 and Frame #2) worth of
   codebook indices (or 88 bits), there is a 4-bit CRC calculated on
   these 88 bits.  The pitch indices of the first frame (Pidx1: 7 bits)
   and the second frame (Pidx2: 5 bits) of the frame pair then follow.
   The class indices of the two frames in the frame pair worth 1 bit
   each (Cidx1 and Cidx2) next follow.  Finally, a 2-bit CRC calculated
   on the pitch and class bits (total: 14 bits) of the frame pair is
   included (PC-CRC).  The total number of bits in a frame pair packet
   is therefore 44 + 44 + 4 + 7 + 5 + 1 + 1 + 2 = 108.  At the end, each
   FP MUST be padded with 4 zeros to the MSB 4 bits of the last octet in
   order to make the FP aligned to the octet boundary.
   The following diagram shows a complete ES 202 211 FP:

</p><p class="rfcparagraph">     Frame #1 in FP:
     ===============
       (MSB)                                     (LSB)
         0     1     2     3     4     5     6     7
      +-----+-----+-----+-----+-----+-----+-----+-----+
      :  idx(2,3) |            idx(0,1)               |    Octet 1
      +-----+-----+-----+-----+-----+-----+-----+-----+
      :       idx(4,5)        |     idx(2,3) (cont)   :    Octet 2
      +-----+-----+-----+-----+-----+-----+-----+-----+
      |             idx(6,7)              |idx(4,5)(cont)  Octet 3
      +-----+-----+-----+-----+-----+-----+-----+-----+
       idx(10,11) |              idx(8,9)             |    Octet 4
      +-----+-----+-----+-----+-----+-----+-----+-----+
      :       idx(12,13)      |   idx(10,11) (cont)   :    Octet 5
      +-----+-----+-----+-----+-----+-----+-----+-----+
                              |   idx(12,13) (cont)   :    Octet 6/1
                              +-----+-----+-----+-----+

    Frame #2 in FP:
    ===============
       (MSB)                                     (LSB)
         0     1     2     3     4     5     6     7
      +-----+-----+-----+-----+
      :        idx(0,1)       |                            Octet 6/2
      +-----+-----+-----+-----+-----+-----+-----+-----+
      |              idx(2,3)             |idx(0,1)(cont)  Octet 7
      +-----+-----+-----+-----+-----+-----+-----+-----+
      :  idx(6,7) |              idx(4,5)             |    Octet 8
      +-----+-----+-----+-----+-----+-----+-----+-----+
      :        idx(8,9)       |      idx(6,7) (cont)  :    Octet 9
      +-----+-----+-----+-----+-----+-----+-----+-----+
      |          idx(10,11)               |idx(8,9)(cont)  Octet 10
      +-----+-----+-----+-----+-----+-----+-----+-----+
      |                   idx(12,13)                  |    Octet 11
      +-----+-----+-----+-----+-----+-----+-----+-----+

    CRC for Frame #1 and Frame #2 in FP:
    ====================================
       (MSB)                                     (LSB)
         0     1     2     3     4     5     6     7
                              +-----+-----+-----+-----+
                              |          CRC          |    Octet 12/1
                              +-----+-----+-----+-----+
    Extension information and padding in FP:
    ========================================
       (MSB)                                     (LSB)
         0     1     2     3     4     5     6     7
      +-----+-----+-----+-----+
      :       Pidx1           |                            Octet 12/2
      +-----+-----+-----+-----+-----+-----+-----+-----+
      |            Pidx2            |   Pidx1 (cont)  :    Octet 13
      +-----+-----+-----+-----+-----+-----+-----+-----+
      |  0  |  0  |  0  |  0  |  PC-CRC   |Cidx2|Cidx1|    Octet 14
      +-----+-----+-----+-----+-----+-----+-----+-----+

   The 4-bit CRC and the 2-bit PC-CRC in the FP MUST be calculated using
   the formula (including the bit-order rules) defined in 6.2.4 in [2].

</p><p class="rfcparagraph">   Therefore, each FP represents 20ms of original speech.  Note, as
   shown above, each FP MUST be padded with 4 zeros to the MSB 4 bits of
   the last octet in order to make the FP aligned to the octet boundary.
   This makes the total size of an FP 112 bits, or 14 octets.  Note,
   this padding is separate from padding indicated by the P bit in the
   RTP header.

</p><p class="rfcparagraph"><a name="section-3.3.1.2"><h4>3.3.1.2   Format of Null FP</h4></a>
                        <a href="raw/text/rfc4060.txt" class="rawLink">raw</a>
                    

   A Null FP for the ES 202 211 front-end codec is defined by setting
   all the 112 bits of the FP with zeros.  Null FPs are sent to mark the
   end of a transmission segment.  Details on transmission segment and
   the use of Null FPs can be found in RFC 3557 [10].

</p><p class="rfcparagraph">	<a name="section-3.4"><h3>3.4   Payload Format for ES 202 212 DSR</h3></a>

   Similar to other ETSI DSR front-end encoding schemes, the encoded DSR
   feature stream of ES 202 212 is transmitted in a sequence of FPs,
   where each FP represents two consecutive original voice frames.

</p><p class="rfcparagraph">   An ES 202 212 DSR RTP payload datagram is very similar to that
   defined in Section 3 of RFC 3557 [10], i.e., a standard RTP header
   followed by a DSR payload containing a series of DSR FPs.

</p><p class="rfcparagraph">   The size of each ES 202 212 FP is 112 bits or 14 octets, as defined
   in the following sections.  This ensures that an ES 202 212 DSR RTP
   payload will always end on an octet boundary.
	<a name="section-3.4.1"><h4>3.4.1   Frame Pair Formats</h4></a>

<a name="section-3.4.1.1"><h4>3.4.1.1   Format of Speech and Non-speech FPs</h4></a>
                        <a href="raw/text/rfc4060.txt" class="rawLink">raw</a>
                    

   The following mel-cepstral frame MUST be used, as defined in Section
   7.2.4 of [3]:

</p><p class="rfcparagraph">   Immediately following two frames (Frame #1 and Frame #2) worth of
   codebook indices (or 88 bits), there is a 4-bit CRC calculated on
   these 88 bits.  The pitch indices of the first frame (Pidx1: 7 bits)
   and the second frame (Pidx2: 5 bits) of the frame pair then follow.
   The class indices of the two frames in the frame pair worth 1 bit
   each next follow (Cidx1 and Cidx2).  Finally, a 2-bit CRC (PC-CRC)
   calculated on the pitch and class bits (total: 14 bits) of the frame
   pair is included.  The total number of bits in frame pair packet is
   therefore 44 + 44 + 4 + 7 + 5 + 1 + 1 + 2 = 108.  At the end, each FP
   MUST be padded with 4 zeros to the MSB 4 bits of the last octet in
   order to make the FP aligned to the octet boundary.  The padding
   brings the total size of a FP to 112 bits, or 14 octets.  Note that
   this padding is separate from padding indicated by the P bit in the
   RTP header.

</p><p class="rfcparagraph">   The following diagram shows a complete ES 202 212 FP:

</p><p class="rfcparagraph">     Frame #1 in FP:
     ===============
        (MSB)                                     (LSB)
          0     1     2     3     4     5     6     7
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :  idx(2,3) |            idx(0,1)               |    Octet 1
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :       idx(4,5)        |     idx(2,3) (cont)   :    Octet 2
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |             idx(6,7)              |idx(4,5)(cont)  Octet 3
       +-----+-----+-----+-----+-----+-----+-----+-----+
   idx(10,11)| VAD |              idx(8,9)             |    Octet 4
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :       idx(12,13)      |   idx(10,11) (cont)   :    Octet 5
       +-----+-----+-----+-----+-----+-----+-----+-----+
                               |   idx(12,13) (cont)   :    Octet 6/1
                               +-----+-----+-----+-----+
    Frame #2 in FP:
    ===============
        (MSB)                                     (LSB)
          0     1     2     3     4     5     6     7
       +-----+-----+-----+-----+
       :        idx(0,1)       |                            Octet 6/2
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |              idx(2,3)             |idx(0,1)(cont)  Octet 7
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :  idx(6,7) |              idx(4,5)             |    Octet 8
       +-----+-----+-----+-----+-----+-----+-----+-----+
       :        idx(8,9)       |      idx(6,7) (cont)  :    Octet 9
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |          idx(10,11)         | VAD |idx(8,9)(cont)  Octet 10
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |                   idx(12,13)                  |    Octet 11
       +-----+-----+-----+-----+-----+-----+-----+-----+


    CRC for Frame #1 and Frame #2 in FP:
    ====================================
        (MSB)                                     (LSB)
          0     1     2     3     4     5     6     7
                               +-----+-----+-----+-----+
                               |          CRC          |    Octet 12/1
                               +-----+-----+-----+-----+

    Extension information and padding in FP:
    ========================================
        (MSB)                                     (LSB)
          0     1     2     3     4     5     6     7
       +-----+-----+-----+-----+
       :       Pidx1           |                            Octet 12/2
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |            Pidx2            |   Pidx1 (cont)  :    Octet 13
       +-----+-----+-----+-----+-----+-----+-----+-----+
       |  0  |  0  |  0  |  0  |  PC-CRC   |Cidx2|Cidx1|    Octet 14
       +-----+-----+-----+-----+-----+-----+-----+-----+
</pre>


   The codebook indices, VAD flag, pitch index, and class index are
   specified in Section 6 of [3].  The 4-bit CRC and the 2-bit PC-CRC in
   the FP MUST be calculated using the formula (including the bit-order
   rules) defined in 7.2.4 in [3].
<a name="section-3.4.1.2"><h4>3.4.1.2   Format of Null FP</h4></a>
                        <a href="raw/text/rfc4060.txt" class="rawLink">raw</a>
                    

   A Null FP for the ES 202 212 front-end codec is defined by setting
   all 112 bits of the FP with zeros.  Null FPs are sent to mark the end
   of a transmission segment.  Details on transmission segments and the
   use of Null FPs can be found in RFC 3557 [10].

</p><p class="rfcparagraph">	<a name="section-4"><h2>4.   IANA Considerations</h2></a>

   For each of the three ETSI DSR front-end codecs covered in this
   document, a new MIME subtype registration has been registered by the
   IANA for the corresponding payload type, as described below.

</p><p class="rfcparagraph">   Media Type name: audio

   Media subtype names:

</p><p class="rfcparagraph">         dsr-es202050 (for ES 202 050 front-end)

         dsr-es202211 (for ES 202 211 front-end)

         dsr-es202212 (for ES 202 212 front-end)

   Required parameters: none

   Optional parameters:

</p><p class="rfcparagraph">   rate: Indicates the sample rate of the speech.  Valid values include:
      8000, 11000, and 16000.  If this parameter is not present, 8000
      sample rate is assumed.

</p><p class="rfcparagraph">   maxptime: see RFC 3267 [7].  If this parameter is not present,
      maxptime is assumed to be 80ms.

</p><p class="rfcparagraph">      Note, since the performance of most speech recognizers are
      extremely sensitive to consecutive FP losses, if the user of the
      payload format expects a high packet loss ratio for the session,
      it MAY consider to explicitly choose a maxptime value for the
      session that is shorter than the default value.

</p><p class="rfcparagraph">   ptime: see RFC 2327 [5].

</p><p class="rfcparagraph">   Encoding considerations: These types are defined for transfer via RTP
      [8] as described in Section 3 of RFC 4060.

</p><p class="rfcparagraph">   Security considerations: See Section 5 of RFC 4060.
   Person & email address to contact for further information:
      Qiaobing.Xie@motorola.com

   Intended usage: COMMON.  It is expected that many VoIP applications
      (as well as mobile applications) will use this type.

</p><p class="rfcparagraph">   Author: Qiaobing.Xie@motorola.com

   Change controller: IETF Audio/Video transport working group

	<a name="section-4.1"><h3>4.1   Mapping MIME Parameters into SDP</h3></a>

   The information carried in the MIME media type specification has a
   specific mapping to fields in the Session Description Protocol (SDP)
   [5], which is commonly used to describe RTP sessions.  When SDP is
   used to specify sessions employing ES 202 050, ES 202 211, or ES 202
   212 DSR codec, the mapping is as follows:

</p><p class="rfcparagraph">   o  The MIME type ("audio") goes in SDP "m=" as the media name.

</p><p class="rfcparagraph">   o  The MIME subtype ("dsr-es202050", "dsr-es202211", or
      "dsr-es202212") goes in SDP "a=rtpmap" as the encoding name.

</p><p class="rfcparagraph">   o  The optional parameter "rate" also goes in "a=rtpmap" as clock
      rate.  If no rate is given, then the default value (i.e., 8000) is
      used in SDP.

</p><p class="rfcparagraph">   o  The optional parameters "ptime" and "maxptime" go in the SDP
      "a=ptime" and "a=maxptime" attributes, respectively.

</p><p class="rfcparagraph">   Example of usage of ES 202 050 DSR:

</p><p class="rfcparagraph">     m=audio 49120 RTP/AVP 101
     a=rtpmap:101 dsr-es202050/8000
     a=maxptime:40

   Example of usage of ES 202 211 DSR:

</p><p class="rfcparagraph">     m=audio 49120 RTP/AVP 101
     a=rtpmap:101 dsr-es202211/8000
     a=maxptime:40

   Example of usage of ES 202 212 DSR:

</p><p class="rfcparagraph">     m=audio 49120 RTP/AVP 101
     a=rtpmap:101 dsr-es202212/8000
     a=maxptime:40
	<a name="section-4.2"><h3>4.2   Usage in Offer/Answer</h3></a>

   All SDP parameters in this payload format are declarative, and all
   reasonable values are expected to be supported.  Thus, the standard
   usage of Offer/Answer as described in RFC 3264 [6] should be
   followed.

</p><p class="rfcparagraph">	<a name="section-4.3"><h3>4.3   Congestion Control</h3></a>

   Congestion control for RTP MUST be used in accordance with RFC 3550
   [8], and in any applicable RTP profile, e.g., RFC 3551 [9].

</p><p class="rfcparagraph">	<a name="section-5"><h2>5.   Security Considerations</h2></a>

   Implementations using the payload defined in this specification are
   subject to the security considerations discussed in the RTP
   specification RFC 3550 [8] and any RTP profile, e.g., RFC 3551 [9].
   This payload does not specify any different security services.

</p><p class="rfcparagraph">	<a name="section-6"><h2>6.   Acknowledgments</h2></a>

   The design presented here is based on that of RFC 3557 [10].  The
   authors wish to thank Magnus Westerlund and others for their reviews
   and comments.

</p><p class="rfcparagraph">	<a name="section-7"><h2>7.   References</h2></a>

	<a name="section-7.1"><h3>7.1   Normative References</h3></a>

   [1]   European Telecommunications Standards Institute (ETSI) Standard
         ES 202 050, "Speech Processing, Transmission and Quality
         Aspects (STQ); Distributed Speech Recognition; Advanced Front-
         end Feature Extraction Algorithm; Compression Algorithms",
         http://pda.etsi.org/pda/.

</p><p class="rfcparagraph">   [2]   European Telecommunications Standards Institute (ETSI) Standard
         ES 202 211, "Speech Processing, Transmission and Quality
         Aspects (STQ); Distributed Speech Recognition; Extended front-
         end feature extraction algorithm; Compression algorithms; Back-
         end speech reconstruction algorithm", http://pda.etsi.org/pda/.

</p><p class="rfcparagraph">   [3]   European Telecommunications Standards Institute (ETSI) Standard
         ES 202 212, "Speech Processing, Transmission and Quality
         aspects (STQ); Distributed speech recognition; Extended
         advanced front-end feature extraction algorithm; Compression
         algorithms; Back-end speech reconstruction algorithm",
         http://pda.etsi.org/pda/.
   [4]   Bradner, S., "Key words for use in RFCs to Indicate Requirement
         Levels", BCP 14, RFC 2119, March 1997.

</p><p class="rfcparagraph">   [5]   Handley, M. and V. Jacobson, "SDP: Session Description
         Protocol", RFC 2327, April 1998.

</p><p class="rfcparagraph">   [6]   Rosenberg, J. and H. Schulzrinne, "An Offer/Answer Model with
         the Session Description Protocol (SDP)", RFC 3264, June 2002.

</p><p class="rfcparagraph">   [7]   Sjoberg, J., Westerlund, M., Lakaniemi, A., and Q. Xie,
         "Real-Time Transport Protocol (RTP) Payload Format and File
         Storage Format for the Adaptive Multi-Rate (AMR) and Adaptive
         Multi-Rate Wideband (AMR-WB) Audio Codecs", RFC 3267,
         June 2002.

</p><p class="rfcparagraph">   [8]   Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson,
         "RTP: A Transport Protocol for Real-Time Applications", STD 64,
         RFC 3550, July 2003.

</p><p class="rfcparagraph">   [9]   Schulzrinne, H. and S. Casner, "RTP Profile for Audio and Video
         Conferences with Minimal Control", STD 65, RFC 3551, July 2003.

</p><p class="rfcparagraph">   [10]  Xie, Q., "RTP Payload Format for European Telecommunications
         Standards Institute (ETSI) European Standard ES 201 108
         Distributed Speech Recognition Encoding", RFC 3557, July 2003.

</p><p class="rfcparagraph">	<a name="section-7.2"><h3>7.2   Informative References</h3></a>

   [11]  European Telecommunications Standards Institute (ETSI) Standard
         ES 201 108, "Speech Processing, Transmission and Quality
         Aspects (STQ); Distributed Speech Recognition; Front-end
         Feature Extraction Algorithm; Compression Algorithms",
         http://pda.etsi.org/pda/.
Authors' Addresses

   Qiaobing Xie
   Motorola, Inc.
   1501 W. Shure Drive, 2-F9
   Arlington Heights, IL  60004
   US

   Phone: +1-847-632-3028
   EMail: qxie1@email.mot.com


   David Pearce
   Motorola Labs
   UK Research Laboratory
   Jays Close
   Viables Industrial Estate
   Basingstoke, HANTS  RG22 4PD
   UK

   Phone: +44 (0)1256 484 436<br>
   EMail: bdp003@motorola.com
Full Copyright Statement

   Copyright (C) The Internet Society (2005).<br>

</p><p class="rfcparagraph">   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

</p><p class="rfcparagraph">   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

</p><p class="rfcparagraph">Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

</p><p class="rfcparagraph">   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

</p><p class="rfcparagraph">   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

</p><p class="rfcparagraph">Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.

</p>





Xie & Pearce                Standards Track                    [Page 19]


      </td>
      <td class=code>
        <div class='highlight'>
            <!--
            <b>Related Stack Overflow questions:</b>
            <ul>
                
            </ul>
            -->
        </div>
      </td>
    </tr>
  </table>
</div>
</body>