<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title></title>
  <link rel="stylesheet" href="rfc.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1></h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-'>
      <td class=docs>
        <p class="rfcparagraph">Internet Engineering Task Force (IETF)                      C. Pignataro
Request for Comments: 7676                                 Cisco Systems
Category: Standards Track                                      R. Bonica
ISSN: 2070-1721                                         Juniper Networks
                                                             S. Krishnan
                                                                Ericsson
                                                            October 2015


          IPv6 Support for Generic Routing Encapsulation (GRE)

<h2>Abstract</h2>

   Generic Routing Encapsulation (GRE) can be used to carry any network-
   layer payload protocol over any network-layer delivery protocol.
   Currently, GRE procedures are specified for IPv4, used as either the
   payload or delivery protocol.  However, GRE procedures are not
   specified for IPv6.

</p><p class="rfcparagraph">   This document specifies GRE procedures for IPv6, used as either the
   payload or delivery protocol.

</p><p class="rfcparagraph">Status of This Memo

   This is an Internet Standards Track document.

</p><p class="rfcparagraph">   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in Section 2 of RFC 5741.

</p><p class="rfcparagraph">   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   http://www.rfc-editor.org/info/rfc7676.
<h2>Copyright Notice</h2>

   Copyright (c) 2015 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

</p><p class="rfcparagraph">   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

</p><p class="rfcparagraph">Table of Contents
<a href="#section-1" class="">1. Introduction  . . . . . . . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-1.1" class="indent-1">1.1. Requirements Language . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-1.2" class="indent-1">1.2. Terminology . . . . . . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-2" class="">2. GRE Header Fields . . . . . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-2.1" class="indent-1">2.1. Checksum Present  . . . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-3" class="">3. IPv6 as GRE Payload . . . . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-3.1" class="indent-1">3.1. GRE Protocol Type Considerations  . . . . . . . . . . . </a><br>
<a href="#section-3.2" class="indent-1">3.2. MTU Considerations  . . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-3.3" class="indent-1">3.3. Fragmentation Considerations  . . . . . . . . . . . . . </a><br>
<a href="#section-4" class="">4. IPv6 as GRE Delivery Protocol . . . . . . . . . . . . . . . </a><br>
<a href="#section-4.1" class="indent-1">4.1. Next Header Considerations  . . . . . . . . . . . . . . </a><br>
<a href="#section-4.2" class="indent-1">4.2. Checksum Considerations . . . . . . . . . . . . . . . . </a><br>
<a href="#section-4.3" class="indent-1">4.3. MTU Considerations  . . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-5" class="">5. Security Considerations . . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-6" class="">6. References  . . . . . . . . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-6.1" class="indent-1">6.1. Normative References  . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-6.2" class="indent-1">6.2. Informative References  . . . . . . . . . . . . . . . . </a><br>
   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  10
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  11
	<a name="section-1"><h2>1.   Introduction</h2></a>

   Generic Routing Encapsulation (GRE) [RFC2784] [RFC2890] can be used
   to carry any network-layer payload protocol over any network-layer
   delivery protocol.  Currently, GRE procedures are specified for IPv4
   [RFC791], used as either the payload or delivery protocol.  However,
   GRE procedures are not specified for IPv6 [RFC2460].

</p><p class="rfcparagraph">   This document specifies GRE procedures for IPv6, used as either the
   payload or delivery protocol.  Like RFC 2784, this document describes
   how GRE has been implemented by several vendors.

</p><p class="rfcparagraph">	<a name="section-1.1"><h3>1.1   Requirements Language</h3></a>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

</p><p class="rfcparagraph">	<a name="section-1.2"><h3>1.2   Terminology</h3></a>

   The following terms are used in this document:

</p><p class="rfcparagraph">   o  GRE delivery header: An IPv4 or IPv6 header whose source address
      represents the GRE ingress node and whose destination address
      represents the GRE egress node.  The GRE delivery header
      encapsulates a GRE header.

</p><p class="rfcparagraph">   o  GRE header: The GRE protocol header.  The GRE header is
      encapsulated in the GRE delivery header and encapsulates the GRE
      payload.

</p><p class="rfcparagraph">   o  GRE payload: A network-layer packet that is encapsulated by the
      GRE header.

</p><p class="rfcparagraph">   o  GRE overhead: The combined size of the GRE delivery header and the
      GRE header, measured in octets.

</p><p class="rfcparagraph">   o  Path MTU (PMTU): The minimum MTU of all the links in a path
      between a source node and a destination node.  If the source and
      destination node are connected through Equal-Cost Multipath
      (ECMP), the PMTU is equal to the minimum link MTU of all links
      contributing to the multipath.

</p><p class="rfcparagraph">   o  Path MTU Discovery (PMTUD): A procedure for dynamically
      discovering the PMTU between two nodes on the Internet.  PMTUD
      procedures for IPv6 are defined in [RFC1981].
   o  GRE MTU (GMTU): The maximum transmission unit, i.e., maximum
      packet size in octets, that can be conveyed over a GRE tunnel
      without fragmentation of any kind.  The GMTU is equal to the PMTU
      associated with the path between the GRE ingress and the GRE
      egress, minus the GRE overhead.

</p><p class="rfcparagraph">	<a name="section-2"><h2>2.   GRE Header Fields</h2></a>

   This document does not change the GRE header format or any behaviors
   specified by RFC 2784 or RFC 2890.

</p><p class="rfcparagraph">	<a name="section-2.1"><h3>2.1   Checksum Present</h3></a>

   The GRE ingress node SHOULD set the Checksum Present field in the GRE
   header to zero.  However, implementations MAY support a configuration
   option that causes the GRE ingress node to set the Checksum Present
   field to one.

</p><p class="rfcparagraph">   As per Section 2.2 of RFC 2784, the GRE egress node uses the Checksum
   Present field to calculate the length of the GRE header.  If the
   Checksum Present field is set to one, the GRE egress node MUST use
   the GRE Checksum to verify the integrity of the GRE header and
   payload.

</p><p class="rfcparagraph">   Setting the Checksum Present field to zero reduces the computational
   cost of GRE encapsulation and decapsulation.  In many cases, the GRE
   Checksum is partially redundant with other checksums.  For example:

</p><p class="rfcparagraph">   o  If the payload protocol is IPv4, the IPv4 header is protected by
      both the GRE Checksum and the IPv4 Checksum.

</p><p class="rfcparagraph">   o  If the payload carries TCP [RFC793], the TCP pseudo header, TCP
      header, and TCP payload are protected by both the GRE Checksum and
      TCP Checksum.

</p><p class="rfcparagraph">   o  If the payload carries UDP [RFC768], the UDP pseudo header, UDP
      header, and UDP payload are protected by both the GRE Checksum and
      UDP Checksum.

</p><p class="rfcparagraph">   However, if the GRE Checksum Present field is set to zero, the GRE
   header is not protected by any checksum.  Furthermore, depending on
   which of the above-mentioned conditions are true, selected portions
   of the GRE payload will not be protected by any checksum.

</p><p class="rfcparagraph">   Network operators should evaluate risk factors in their networks and
   configure GRE ingress nodes appropriately.
	<a name="section-3"><h2>3.   IPv6 as GRE Payload</h2></a>

   The following considerations apply to GRE tunnels that carry an IPv6
   payload.

</p><p class="rfcparagraph">	<a name="section-3.1"><h3>3.1   GRE Protocol Type Considerations</h3></a>

   The Protocol Type field in the GRE header MUST be set to Ether Type
   [RFC7042] 0x86DD (IPv6).

</p><p class="rfcparagraph">	<a name="section-3.2"><h3>3.2   MTU Considerations</h3></a>

   A GRE tunnel MUST be able to carry a 1280-octet IPv6 packet from
   ingress to egress, without fragmenting the payload packet.  All GRE
   tunnels with a GMTU of 1280 octets or greater satisfy this
   requirement.  GRE tunnels that can fragment and reassemble delivery
   packets also satisfy this requirement, regardless of their GMTU.
   However, the ability to fragment and reassemble delivery packets is
   not a requirement of this specification.  This specification requires
   only that GRE ingress nodes refrain from activating GRE tunnels that
   do not satisfy the above-mentioned requirement.

</p><p class="rfcparagraph">   Before activating a GRE tunnel and periodically thereafter, the GRE
   ingress node MUST verify the tunnel's ability to carry a 1280-octet
   IPv6 payload packet from ingress to egress, without fragmenting the
   payload.  Having executed those procedures, the GRE ingress node MUST
   activate or deactivate the tunnel accordingly.

</p><p class="rfcparagraph">   Implementation details regarding the above-mentioned verification
   procedures are beyond the scope of this document.  However, a GRE
   ingress node can verify tunnel capabilities by sending a 1280-octet
   IPv6 packet addressed to itself through the tunnel under test.

</p><p class="rfcparagraph">   Many existing implementations [RFC7588] do not support the above-
   mentioned verification procedures.  Unless deployed in environments
   where the GMTU is guaranteed to be greater than 1280, these
   implementations MUST be configured so that the GRE endpoints can
   fragment and reassemble the GRE delivery packet.

</p><p class="rfcparagraph">	<a name="section-3.3"><h3>3.3   Fragmentation Considerations</h3></a>

   When the GRE ingress receives an IPv6 payload packet whose length is
   less than or equal to the GMTU, it can encapsulate and forward the
   packet without fragmentation of any kind.  In this case, the GRE
   ingress router MUST NOT fragment the payload or delivery packets.
   When the GRE ingress receives an IPv6 payload packet whose length is
   greater than the GMTU, and the GMTU is greater than or equal to 1280
   octets, the GRE ingress router MUST:

</p><p class="rfcparagraph">   o  discard the IPv6 payload packet

   o  send an ICMPv6 Packet Too Big (PTB) [RFC4443] message to the IPv6
      payload packet source.  The MTU field in the ICMPv6 PTB message is
      set to the GMTU.

</p><p class="rfcparagraph">   When the GRE ingress receives an IPv6 payload packet whose length is
   greater than the GMTU, and the GMTU is less than 1280 octets, the GRE
   ingress router MUST:

</p><p class="rfcparagraph">   o  encapsulate the entire IPv6 packet in a single GRE header and IP
      delivery header

   o  fragment the delivery header, so that it can be reassembled by the
      GRE egress

	<a name="section-4"><h2>4.   IPv6 as GRE Delivery Protocol</h2></a>

   The following considerations apply when the delivery protocol is
   IPv6.

</p><p class="rfcparagraph">	<a name="section-4.1"><h3>4.1   Next Header Considerations</h3></a>

   When the GRE delivery protocol is IPv6, the GRE header MAY
   immediately follow the GRE delivery header.  Alternatively, IPv6
   extension headers MAY be inserted between the GRE delivery header and
   the GRE header.

</p><p class="rfcparagraph">   If the GRE header immediately follows the GRE delivery header, the
   Next Header field in the IPv6 header of the GRE delivery packet MUST
   be set to 47.  If extension headers are inserted between the GRE
   delivery header and the GRE header, the Next Header field in the last
   IPv6 extension header MUST be set to 47.

</p><p class="rfcparagraph">	<a name="section-4.2"><h3>4.2   Checksum Considerations</h3></a>

   As stated in [RFC2784], the GRE header can contain a checksum.  If
   present, the GRE header checksum can be used to detect corruption of
   the GRE header and GRE payload.

</p><p class="rfcparagraph">   The GRE header checksum cannot be used to detect corruption of the
   IPv6 delivery header.  Furthermore, the IPv6 delivery header does not
   contain a checksum of its own.  Therefore, no available checksum can
   be used to detect corruption of the IPv6 delivery header.
   In one failure scenario, the destination address in the IPv6 delivery
   header is corrupted.  As a result, the IPv6 delivery packet is
   delivered to a node other than the intended GRE egress node.
   Depending upon the state and configuration of that node, it will
   either:

</p><p class="rfcparagraph">   a.  Drop the packet

   b.  Decapsulate the payload and forward it to its intended
       destination

   c.  Decapsulate the payload and forward it to a node other than its
       intended destination.

</p><p class="rfcparagraph">   Behaviors a) and b) are acceptable.  Behavior c) is not acceptable.

</p><p class="rfcparagraph">   Behavior c) is possible only when the following conditions are true:

</p><p class="rfcparagraph">   1.  The intended GRE egress node is a Virtual Private Network (VPN)
       Provider Edge (PE) router.

</p><p class="rfcparagraph">   2.  The node to which the GRE delivery packet is mistakenly delivered
       is also a VPN PE router.

</p><p class="rfcparagraph">   3.  VPNs are attached to both of the above-mentioned nodes.  At least
       two of these VPN's number hosts are from a non-unique (e.g.,
       [RFC1918]) address space.

</p><p class="rfcparagraph">   4.  The intended GRE egress node maintains state that causes it to
       decapsulate the packet and forward the payload to its intended
       destination

   5.  The node to which the GRE delivery packet is mistakenly delivered
       maintains state that causes it to decapsulate the packet and
       forward the payload to an identically numbered host in another
       VPN.

</p><p class="rfcparagraph">   While the failure scenario described above is extremely unlikely, a
   single misdelivered packet can adversely impact applications running
   on the node to which the packet is misdelivered.  Furthermore,
   leaking packets across VPN boundaries also constitutes a security
   breach.  The risk associated with behavior c) could be mitigated with
   end-to-end authentication of the payload.

</p><p class="rfcparagraph">   Before deploying GRE over IPv6, network operators should consider the
   likelihood of behavior c) in their network.  GRE over IPv6 MUST NOT
   be deployed other than where the network operator deems the risk
   associated with behavior c) to be acceptable.
	<a name="section-4.3"><h3>4.3   MTU Considerations</h3></a>

   By default, the GRE ingress node cannot fragment the IPv6 delivery
   header.  However, implementations MAY support an optional
   configuration in which the GRE ingress node can fragment the IPv6
   delivery header.

</p><p class="rfcparagraph">   Also by default, the GRE egress node cannot reassemble the IPv6
   delivery header.  However, implementations MAY support an optional
   configuration in which the GRE egress node can reassemble the IPv6
   delivery header.

</p><p class="rfcparagraph">	<a name="section-5"><h2>5.   Security Considerations</h2></a>

   The Security Considerations section of [RFC4023] identifies threats
   encountered when MPLS is delivered over GRE.  These threats apply to
   any GRE payload.  As stated in RFC 4023, these various threats can be
   mitigated through options such as authenticating and/or encrypting
   the delivery packet using IPsec [RFC4301].  Alternatively, when the
   payload is IPv6, these threats can also be mitigated by
   authenticating and/or encrypting the payload using IPsec, instead of
   the delivery packet.  Otherwise, the current specification introduces
   no security considerations beyond those mentioned in RFC 2784.

</p><p class="rfcparagraph">   More generally, security considerations for IPv6 are discussed in
   [RFC4942].  Operational security for IPv6 is discussed in [OPSEC-V6],
   and security concerns for tunnels in general are discussed in
   [RFC6169].

</p><p class="rfcparagraph">	<a name="section-6"><h2>6.   References</h2></a>

	<a name="section-6.1"><h3>6.1   Normative References</h3></a>

   [RFC768]   Postel, J., "User Datagram Protocol", STD 6, RFC 768,
              DOI 10.17487/RFC0768, August 1980,
              <http://www.rfc-editor.org/info/rfc768>.

</p><p class="rfcparagraph">   [RFC791]   Postel, J., "Internet Protocol", STD 5, RFC 791,
              DOI 10.17487/RFC0791, September 1981,
              <http://www.rfc-editor.org/info/rfc791>.

</p><p class="rfcparagraph">   [RFC793]   Postel, J., "Transmission Control Protocol", STD 7,
              RFC 793, DOI 10.17487/RFC0793, September 1981,
              <http://www.rfc-editor.org/info/rfc793>.

</p><p class="rfcparagraph">   [RFC1981]  McCann, J., Deering, S., and J. Mogul, "Path MTU Discovery
              for IP version 6", RFC 1981, DOI 10.17487/RFC1981, August
              1996, <http://www.rfc-editor.org/info/rfc1981>.
   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <http://www.rfc-editor.org/info/rfc2119>.

</p><p class="rfcparagraph">   [RFC2460]  Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", RFC 2460, DOI 10.17487/RFC2460,
              December 1998, <http://www.rfc-editor.org/info/rfc2460>.

</p><p class="rfcparagraph">   [RFC2784]  Farinacci, D., Li, T., Hanks, S., Meyer, D., and P.
              Traina, "Generic Routing Encapsulation (GRE)", RFC 2784,
              DOI 10.17487/RFC2784, March 2000,
              <http://www.rfc-editor.org/info/rfc2784>.

</p><p class="rfcparagraph">   [RFC2890]  Dommety, G., "Key and Sequence Number Extensions to GRE",
              RFC 2890, DOI 10.17487/RFC2890, September 2000,
              <http://www.rfc-editor.org/info/rfc2890>.

</p><p class="rfcparagraph">   [RFC4023]  Worster, T., Rekhter, Y., and E. Rosen, Ed.,
              "Encapsulating MPLS in IP or Generic Routing Encapsulation
              (GRE)", RFC 4023, DOI 10.17487/RFC4023, March 2005,
              <http://www.rfc-editor.org/info/rfc4023>.

</p><p class="rfcparagraph">   [RFC4301]  Kent, S. and K. Seo, "Security Architecture for the
              Internet Protocol", RFC 4301, DOI 10.17487/RFC4301,
              December 2005, <http://www.rfc-editor.org/info/rfc4301>.

</p><p class="rfcparagraph">   [RFC4443]  Conta, A., Deering, S., and M. Gupta, Ed., "Internet
              Control Message Protocol (ICMPv6) for the Internet
              Protocol Version 6 (IPv6) Specification", RFC 4443,
              DOI 10.17487/RFC4443, March 2006,
              <http://www.rfc-editor.org/info/rfc4443>.

</p><p class="rfcparagraph">	<a name="section-6.2"><h3>6.2   Informative References</h3></a>

   [OPSEC-V6] Chittimaneni, K., Kaeo, M., and E. Vyncke, "Operational
              Security Considerations for IPv6 Networks", Work in
              Progress, draft-ietf-opsec-v6-07, September 2015.

</p><p class="rfcparagraph">   [RFC1918]  Rekhter, Y., Moskowitz, B., Karrenberg, D., de Groot, G.,
              and E. Lear, "Address Allocation for Private Internets",
              BCP 5, RFC 1918, DOI 10.17487/RFC1918, February 1996,
              <http://www.rfc-editor.org/info/rfc1918>.

</p><p class="rfcparagraph">   [RFC4942]  Davies, E., Krishnan, S., and P. Savola, "IPv6 Transition/
              Co-existence Security Considerations", RFC 4942,
              DOI 10.17487/RFC4942, September 2007,
              <http://www.rfc-editor.org/info/rfc4942>.
   [RFC6169]  Krishnan, S., Thaler, D., and J. Hoagland, "Security
              Concerns with IP Tunneling", RFC 6169,
              DOI 10.17487/RFC6169, April 2011,
              <http://www.rfc-editor.org/info/rfc6169>.

</p><p class="rfcparagraph">   [RFC7042]  Eastlake 3rd, D. and J. Abley, "IANA Considerations and
              IETF Protocol and Documentation Usage for IEEE 802
              Parameters", BCP 141, RFC 7042, DOI 10.17487/RFC7042,
              October 2013, <http://www.rfc-editor.org/info/rfc7042>.

</p><p class="rfcparagraph">   [RFC7588]  Bonica, R., Pignataro, C., and J. Touch, "A Widely
              Deployed Solution to the Generic Routing Encapsulation
              (GRE) Fragmentation Problem", RFC 7588,
              DOI 10.17487/RFC7588, July 2015,
              <http://www.rfc-editor.org/info/rfc7588>.

</p>Acknowledgements

   The authors would like to thank Fred Baker, Stewart Bryant, Benoit
   Claise, Ben Campbell, Carlos Jesus Bernardos Cano, Spencer Dawkins,
   Dino Farinacci, David Farmer, Brian Haberman, Tom Herbert, Kathleen
   Moriarty, Fred Templin, Joe Touch, Andrew Yourtchenko, and Lucy Yong
   for their thorough review and useful comments.
Authors' Addresses

   Carlos Pignataro
   Cisco Systems
   7200-12 Kit Creek Road
   Research Triangle Park, North Carolina  27709
   United States

   Email: cpignata@cisco.com


   Ron Bonica
   Juniper Networks
   2251 Corporate Park Drive
   Herndon, Virginia
   United States

   Email: rbonica@juniper.net


   Suresh Krishnan
   Ericsson
   8400 Decarie Blvd.
   Town of Mount Royal, QC
   Canada

   Phone: +1 514 345 7900 x42871
   Email: suresh.krishnan@ericsson.com























Pignataro, et al.            Standards Track                   [Page 11]


      </td>
      <td class=code>
        <div class='highlight'>
            <!--
            <b>Related Stack Overflow questions:</b>
            <ul>
                
            </ul>
            -->
        </div>
      </td>
    </tr>
  </table>
</div>
</body>