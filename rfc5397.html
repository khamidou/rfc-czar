<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title></title>
  <link rel="stylesheet" href="static/css/rfc.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1></h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-'>
      <td class=docs>
        <p class="rfcparagraph">


<p>Network Working Group                                         W. Sanchez<br>Request for Comments: 5397                                      C. Daboo<br>Category: Standards Track                                     Apple Inc.<br>                                                           December 2008<br><br></p>
                  <h1>
                   WebDAV Current Principal Extension</h1>
                  <h2>Status of This Memo</h2>

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

</p><p class="rfcparagraph"><h2>Copyright Notice</h2>

   Copyright (c) 2008 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

</p><p class="rfcparagraph">   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.

</p><p class="rfcparagraph"><h2>Abstract</h2>

   This specification defines a new WebDAV property that allows clients
   to quickly determine the principal corresponding to the current
   authenticated user.

</p><p class="rfcparagraph">Table of Contents
<a href="#section-1" class="">1. Introduction  . . . . . . . . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-2" class="">2. Conventions Used in This Document . . . . . . . . . . . . . . </a><br>
<a href="#section-3" class="">3. DAV:current-user-principal  . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-4" class="">4. Security Considerations . . . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-5" class="">5. Acknowledgments . . . . . . . . . . . . . . . . . . . . . . . </a><br>
<a href="#section-6" class="">6. Normative References  . . . . . . . . . . . . . . . . . . . . </a><br>
	<a name="section-1"><h2>1.   Introduction</h2></a>

   WebDAV [RFC4918] is an extension to HTTP [RFC2616] to support
   improved document authoring capabilities.  The WebDAV Access Control
   Protocol ("WebDAV ACL") [RFC3744] extension adds access control
   capabilities to WebDAV.  It introduces the concept of a "principal"
   resource, which is used to represent information about authenticated
   entities on the system.

</p><p class="rfcparagraph">   Some clients have a need to determine which [RFC3744] principal a
   server is associating with the currently authenticated HTTP user.
   While [RFC3744] defines a DAV:current-user-privilege-set property for
   retrieving the privileges granted to that principal, there is no
   recommended way to identify the principal in question, which is
   necessary to perform other useful operations.  For example, a client
   may wish to determine which groups the current user is a member of,
   or modify a property of the principal resource associated with the
   current user.

</p><p class="rfcparagraph">   The DAV:principal-match REPORT provides some useful functionality,
   but there are common situations where the results from that query can
   be ambiguous.  For example, not only is an individual user principal
   returned, but also every group principal that the user is a member
   of, and there is no clear way to distinguish which is which.

</p><p class="rfcparagraph">   This specification proposes an extension to WebDAV ACL that adds a
   DAV:current-user-principal property to resources under access control
   on the server.  This property provides a URL to a principal resource
   corresponding to the currently authenticated user.  This allows a
   client to "bootstrap" itself by performing additional queries on the
   principal resource to obtain additional information from that
   resource, which is the purpose of this extension.  Note that while it
   is possible for multiple URLs to refer to the same principal
   resource, or for multiple principal resources to correspond to a
   single principal, this specification only allows for a single http(s)
   URL in the DAV:current-user-principal property.  If a client wishes
   to obtain alternate URLs for the principal, it can query the
   principal resource for this information; it is not the purpose of
   this extension to provide a complete list of such URLs, but simply to
   provide a means to locate a resource which contains that (and other)
   information.

</p><p class="rfcparagraph">	<a name="section-2"><h2>2.   Conventions Used in This Document</h2></a>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].
   When XML element types in the namespace "DAV:" are referenced in this
   document outside of the context of an XML fragment, the string "DAV:"
   will be prefixed to the element type names.

</p><p class="rfcparagraph">   Processing of XML by clients and servers MUST follow the rules
   defined in Section 17 of WebDAV [RFC4918].

</p><p class="rfcparagraph">   Some of the declarations refer to XML elements defined by WebDAV
   [RFC4918].

</p><p class="rfcparagraph">	<a name="section-3"><h2>3.   DAV:current-user-principal</h2></a>

   Name:  current-user-principal

   Namespace:  DAV:

</p><p class="rfcparagraph">   Purpose:  Indicates a URL for the currently authenticated user's
      principal resource on the server.

</p><p class="rfcparagraph">   Value:  A single DAV:href or DAV:unauthenticated element.

</p><p class="rfcparagraph">   Protected:  This property is computed on a per-request basis, and
      therefore is protected.

</p><p class="rfcparagraph">   Description:  The DAV:current-user-principal property contains either
      a DAV:href or DAV:unauthenticated XML element.  The DAV:href
      element contains a URL to a principal resource corresponding to
      the currently authenticated user.  That URL MUST be one of the
      URLs in the DAV:principal-URL or DAV:alternate-URI-set properties
      defined on the principal resource and MUST be an http(s) scheme
      URL.  When authentication has not been done or has failed, this
      property MUST contain the DAV:unauthenticated pseudo-principal.

</p><p class="rfcparagraph">      In some cases, there may be multiple principal resources
      corresponding to the same authenticated principal.  In that case,
      the server is free to choose any one of the principal resource
      URIs for the value of the DAV:current-user-principal property.
      However, servers SHOULD be consistent and use the same principal
      resource URI for each authenticated principal.

</p><p class="rfcparagraph">   COPY/MOVE behavior:  This property is computed on a per-request
      basis, and is thus never copied or moved.

</p><p class="rfcparagraph">   Definition:

</p><p class="rfcparagraph">      <!ELEMENT current-user-principal (unauthenticated | href)>
      <!-- href value: a URL to a principal resource -->
   Example:

</p><p class="rfcparagraph">      <D:current-user-principal xmlns:D="DAV:">
        <D:href>/principals/users/cdaboo</D:href>
      </D:current-user-principal>

	<a name="section-4"><h2>4.   Security Considerations</h2></a>

   This specification does not introduce any additional security issues
   beyond those defined for HTTP [RFC2616], WebDAV [RFC4918], and WebDAV
   ACL [RFC3744].

</p><p class="rfcparagraph">	<a name="section-5"><h2>5.   Acknowledgments</h2></a>

   This specification is based on discussions that took place within the
   Calendaring and Scheduling Consortium's CalDAV Technical Committee.
   The authors thank the participants of that group for their input.

</p><p class="rfcparagraph">   The authors thank Julian Reschke for his valuable input via the
   WebDAV working group mailing list.

</p><p class="rfcparagraph">	<a name="section-6"><h2>6.   Normative References</h2></a>

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

</p><p class="rfcparagraph">   [RFC2616]  Fielding, R., Gettys, J., Mogul, J., Frystyk, H.,
              Masinter, L., Leach, P., and T. Berners-Lee, "Hypertext
              Transfer Protocol -- HTTP/1.1", RFC 2616, June 1999.

</p><p class="rfcparagraph">   [RFC3744]  Clemm, G., Reschke, J., Sedlar, E., and J. Whitehead, "Web
              Distributed Authoring and Versioning (WebDAV)
              Access Control Protocol", RFC 3744, May 2004.

</p><p class="rfcparagraph">   [RFC4918]  Dusseault, L., "HTTP Extensions for Web Distributed
              Authoring and Versioning (WebDAV)", RFC 4918, June 2007.

</p>Authors' Addresses

   Wilfredo Sanchez
   Apple Inc.
   1 Infinite Loop
   Cupertino, CA  95014
   USA

   EMail: wsanchez@wsanchez.net
   URI:   http://www.apple.com/
   Cyrus Daboo
   Apple Inc.
   1 Infinite Loop
   Cupertino, CA  95014
   USA

   EMail: cyrus@daboo.name
   URI:   http://www.apple.com/











































Sanchez & Daboo              Standards Track                    [Page 5]



      </td>
      <td class=code>
        <div class='highlight'>
            <!--
            <b>Related Stack Overflow questions:</b>
            <ul>
                
            </ul>
            -->
        </div>
      </td>
    </tr>
  </table>
</div>
</body>