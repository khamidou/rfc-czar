<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title></title>
  <link rel="stylesheet" href="static/css/rfc.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1></h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-'>
      <td class=docs>
        <p class="rfcparagraph">Network Working Group                                         P. Deutsch
Request for Comments: 190           Xerox Research Center, Palo Alto, CA
NIC: 7135                                                   13 July 1971


                DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM

   This report describes an operational system for communicating textual
   display information between a main-site computer and a remote-display
   processor.

</p><p class="rfcparagraph">      The main site machine is a DEC PDP-10 with the BBN paging hardware
      (henceforth TENEX).

</p><p class="rfcparagraph">      The remote machine is a IMLAC PDS-1 (henceforth IMLAC).

</p><p class="rfcparagraph">      Section (1) briefly describes the IMLAC hardware configurations.<br>

</p><p class="rfcparagraph">      Section (II) describes the display facilities presented to the
      user.

</p><p class="rfcparagraph">      Section (III) describes the system calls (JSYS calls) implemented
      in the TENEX monitor to provide these facilities.

</p><p class="rfcparagraph">      Section (IV) describes the formats of the messages used for
      communication between TENEX and the IMLAC.

</p><p class="rfcparagraph">      Section (V) analyzes the division of responsibility between the
      two machines.

</p><p class="rfcparagraph">(1)  Hardware configurations.<br>

</p><p class="rfcparagraph">   The standard IMLAC is a 16-bit minicomputer with 4K of 2 microsecond
   core, a cycle-stealing display, an input keyboard, and an
   asynchronous serial communication interface.

</p><p class="rfcparagraph">   The display is normally programmed to draw characters using very
   short vectors.

</p><p class="rfcparagraph">      The display comes in two major configurations, depending on the
      presence or absence of hardware for drawing long vectors.

</p><p class="rfcparagraph">      In the sequel, specifications depending on the configuration will
      be flagged LVH or non-LVH respectively.

</p><p class="rfcparagraph">   The I/O system normally does not provide for interrupts when
   characters arrive from the serial interface.
      However, the IMLAC is barely able to keep up with the PDP-10
      without this feature, so we were able to persuade the manufacturer
      to implement it.

</p><p class="rfcparagraph">   While no special hardware is required for the software described
   here, the character interrupt and the SRI-ARC "mouse" and "keyset"
   are highly recommended, and the software is oriented towards their
   use.

</p><p class="rfcparagraph">(II)  Facilities.

</p><p class="rfcparagraph">   Each display console in the system may be in "display mode" or
   "teletype simulation mode".

</p><p class="rfcparagraph">      In display mode, the information displayed consists of text
      strings at arbitrary positions on the display face.

</p><p class="rfcparagraph">      In teletype simulation mode, the display shows the last 20-30
      lines which would appear on a teletype listing.

</p><p class="rfcparagraph">      A given console may switch between these modes, under program
      control, without losing any information.

</p><p class="rfcparagraph">   Regardless of mode, each display has a cursor string which follows
   the position of the available pointing device,

      The implemented system uses a "mouse" generally, but one console
      uses a tablet.

</p><p class="rfcparagraph">      The cursor string may be set by a program, for example to indicate
      at what sort of object the user is expected to point.

</p><p class="rfcparagraph">   In display mode, the screen of a given console is allocated to users
   in rectangular blocks called "display areas".

</p><p class="rfcparagraph">      This allows users to communicate via a single display split into
      multiple areas.

</p><p class="rfcparagraph">   When a user (program) requests a display area, he specifies how many
   text strings he will want to display in it.

</p><p class="rfcparagraph">      Each string has its own X-Y location, character size, font
      (italic, underline, ...), and an arbitrary number of characters.

</p><p class="rfcparagraph">         Each of these components is settable without disturbing the
         others.

</p><p class="rfcparagraph">      Each string may be manipulated without affecting the others.
(III) JSYS calls.

</p><p class="rfcparagraph">   (ADA) Assign a display area.

</p><p class="rfcparagraph">      JSYS ada: [440B]     allocate a display area

         Accepts:

</p><p class="rfcparagraph">         r1:

</p><p class="rfcparagraph">            upper-left-y-cord[10], upper-left-x-cord[10], max-no-
            string[11]

         r2:

</p><p class="rfcparagraph">            lower-right-y-cord[10], lower-right-x-cord[10], default-c-
            size[2], default-n-inc[6], default-font[5]

         Returns:

</p><p class="rfcparagraph">            +1: Unsuccessful

               r1: error code

            +2: Successful

               r1: da-id[18]

         Function:

</p><p class="rfcparagraph">            This jsys allocates a display area given the coordinates of
            the diagonal, the maximum number of strings to be displayed,
            and the default setting for the character size, font, and
            horizontal increment.  An 18-bit da-id is returned which
            should subsequently be used to refer to this display area.

</p><p class="rfcparagraph">   (DDA) Deallocate a display area.

</p><p class="rfcparagraph">      JSYS dda; [441B]     deallocate a display area

         Accepts:

</p><p class="rfcparagraph">            r1: da-id
         Returns:

</p><p class="rfcparagraph">            +1: Unsuccessful

               r1: error code

            +2: Successful

         Function:

</p><p class="rfcparagraph">            This jsys deallocates a display area given the associated
            da-id.

</p><p class="rfcparagraph">   (STRDA)  STRing display:  add, delete, or change.

</p><p class="rfcparagraph">   JSYS strda; [442B]     Manipulate (move, write, replace, delete) a
   string in a display area

      Accepts:

</p><p class="rfcparagraph">         r1: string-id[18], da-id[18]

         r2: first byte pointer or 0 or -1

         r2: second byte pointer or 0

         r4: y-cord[10], x-cord[10], font[6], c-size[3], h-inc[7]

      Returns:

</p><p class="rfcparagraph">         +1:  Unsuccessful

               r1: error code

         +2:  Successful

               r1: string-id[18]

      Function:

</p><p class="rfcparagraph">         This jsys writes a new string, replaces, deletes, or moves
         (optionally replacing) an extant string within a display area.
         In addition, the font, character size, and horizontal increment
         may be specified for the string.

</p><p class="rfcparagraph">            The string may be specified by two byte pointers or by one
            byte pointer with the string terminating with a zero
            character.
               If first byte pointer is zero then

                  if a new string is being written then

                     an error code illstr is returned.

</p><p class="rfcparagraph">                  Otherwise, the string already exists so

                     delete the string from the display area.

</p><p class="rfcparagraph">               If the first byte pointer is -1 then

                  if a new string is being written then

                     an error code illstr is returned.

</p><p class="rfcparagraph">                  Otherwise, use the old string.

</p><p class="rfcparagraph">               If the first character of the string is a zero character,
               the string to be displayed is null, but the string is not
               deleted.

</p><p class="rfcparagraph">            The coordinates (optional unless the string is new or being
            moved) are relative to the upper leftcorner of the display
            area.

</p><p class="rfcparagraph">               If the jsys is to effect an extant string, a zero
               coordinate means use the old value.

</p><p class="rfcparagraph">            For the font, c-size, and h-inc fields a field of all one's
            indicates that the display area default value (set in the
            ada jsys) is to be used.  A 0 means use the value which was
            previously used for the (extant) string.

</p><p class="rfcparagraph">            If the string is new, then an 18 bit string identifier is
            returned.

</p><p class="rfcparagraph">   (SCSR)  Set the Cursor StRing.

</p><p class="rfcparagraph">      JSYS scsr; [450B]     display a string (vectors later) as the
      cursor

         Accepts:

</p><p class="rfcparagraph">            r1:  first byte pointer or 0 or -1

            r2:  second byte pointer or 0
            r3: font[5], c-size[2], h-inc[6]

               No defaults allowed

         Returns:

</p><p class="rfcparagraph">            +1:  Unsuccessful

               r1:  error code

            +2:  Successful

         Function:

</p><p class="rfcparagraph">            This jsys is used to set the cursor string.  Later, a set of
            vectors will be allowed also.  If the string length is zero
            or the first byte pointer is 0, nothing will be displayed
            for the cursor.  If the first byte pointer is -1 then the
            old string will be used.  If a cursor did not previously
            exist, an illcon error return will be executed.

</p><p class="rfcparagraph">   (SDDA)  Suppress the display of an area.

</p><p class="rfcparagraph">      JSYS sdda; [444B]    suppress all display in a display area

         Accepts:

</p><p class="rfcparagraph">            r1: da-id[18]

            r2:  1 or 0

         Returns:

</p><p class="rfcparagraph">            +1:  Unsuccessful

               r1:  error code

            +2:  Successful

         Function:

</p><p class="rfcparagraph">            The display image is removed from the display area but is
            not destroyed if r2 = 0.

</p><p class="rfcparagraph">   (RDDA)  Restore the display of an area.

</p><p class="rfcparagraph">      JSYS rdda; [446B]    restore all display in a display area
         Accepts:

</p><p class="rfcparagraph">            r1: da-id[18]

         Returns:

</p><p class="rfcparagraph">            +1:  Unsuccessful

               r1:  error code

  +2:  Successful

         Function:

</p><p class="rfcparagraph">            The display image is restored in the display area.

</p><p class="rfcparagraph">   (SDDA)  Suppress the display of a String.

</p><p class="rfcparagraph">      JSYS ssda [445B];    suppress display of a string in a display
      area

         Accepts:

</p><p class="rfcparagraph">            r1: string-id[18], da-id[18]

         Returns:

</p><p class="rfcparagraph">            +1:  Unsuccessful

               r1:  error code

            +2:  Successful

         Function:

</p><p class="rfcparagraph">            The display image for the given string is suppressed in the
            display area

   (RDSA)  Restore the display of a String.

</p><p class="rfcparagraph">      JSYS rsda; [447B]    restore display of a string in a display area

         Accepts:

</p><p class="rfcparagraph">            r1: string-id[18], da-id[18]
         Returns:

</p><p class="rfcparagraph">            +1:  Unsuccessful

               r1:  error code

            +2:  Successful

         Function:

</p><p class="rfcparagraph">            The display image for the given string is restored in the
            display area.

</p><p class="rfcparagraph">   (TSNDA)  Teletype Simulation oN.

</p><p class="rfcparagraph">      JSYS tsnda; [451B]     turn tty simlaution on

         Accepts:

</p><p class="rfcparagraph">            none

         Returns:

</p><p class="rfcparagraph">            +1:  Always

               r1:  1 if was in work station mode, 0 otherwise

         Function:

</p><p class="rfcparagraph">            Restores the tty simulation display area, and suppresses all
            others (except the cursor).  Turns wsmode (work station mode
            flag) off for this console and returns previous value of
            wsmode.

</p><p class="rfcparagraph">   (TSFDA)  Teletype Simulation ofF.

</p><p class="rfcparagraph">      JSYS tsfda;  [452B]     turn tty simulation off

         Accepts:

</p><p class="rfcparagraph">            none

         Returns:

</p><p class="rfcparagraph">            +1:  Always
         Function:

</p><p class="rfcparagraph">            Suppresses the display of the tty simulation display area,
            restores the display of all other display areas, and sets
            wsmode on.

</p><p class="rfcparagraph">   (RSTDA)    Reset display areas.

</p><p class="rfcparagraph">      JSYS rstda; [453B]     Reset display areas

         Accepts:

</p><p class="rfcparagraph">            none

         Returns:

</p><p class="rfcparagraph">            +1:  Always

         Functions:

</p><p class="rfcparagraph">            Deallocates and removes images from all display areas
            associated with this console except the tty simulation and
            cursor, the display of which is restored.

</p><p class="rfcparagraph">(IV)  Message formats.

</p><p class="rfcparagraph">   Messages are sequences of 8-bit characters, of which 7 contain useful
   information.

</p><p class="rfcparagraph">      The higer-order (200B) bit should contain even parity on IMLAC
      input and is set to even parity on IMLAC output.

</p><p class="rfcparagraph">      If the IMLAC receives an odd parity character, it halts at
      present.

</p><p class="rfcparagraph">      In the remainder of this document, the parity bit will not be
      discussed.

</p><p class="rfcparagraph">   A message may be either a character or a command.

</p><p class="rfcparagraph">   Single-character messages from the PDP-10 to the IMLAC represent
   program output intended for the teletype.

</p><p class="rfcparagraph">   Commands from the PDP-10 represent display information.

</p><p class="rfcparagraph">   Commands from the IMLAC represent characters or other input
   information.
   Every command is prefixed by an internal escape character (code 33B)
   and a character count.

</p><p class="rfcparagraph">      The escape character will henceforth be referred to as ESC: is has
      the same code as the ASCII escape character 33B.

</p><p class="rfcparagraph">   Messages sent from TENEX to IMLAC:

</p><p class="rfcparagraph">      Characters 40B-177B are directed to the teletype simulation area.

</p><p class="rfcparagraph">      Character 12B (line feed) starts a new line in the teletype
      simulation area.

</p><p class="rfcparagraph">      An ESC indicates that display or control information is coming, as
      follows.

</p><p class="rfcparagraph">         Every message beginning with ESC contains the number of
         following characters as its second character.

</p><p class="rfcparagraph">         Certain constructs appear in several command messages.

</p><p class="rfcparagraph">            (da)  A display area identifier is a pair of characters
            containing 12 bits of information:

</p><p class="rfcparagraph">               1st: bits (0:5) + 40B

               2nd: bits (6:11) + 40B

            (NSTRS)  A string count is a single character between 0 and
            177B.

</p><p class="rfcparagraph">            (STRID)  A string identifier is a single character between 1
            and 177B.

</p><p class="rfcparagraph">            (RETAIN)  The retention flag, if non-zero, specifies that an
            existing string should be retained rather than overwritten.

</p><p class="rfcparagraph">            (CSIZE)  A character size is a single character between 0
            and 3:

</p><p class="rfcparagraph">               The character sizes are respectively x1/2, x1, x2, x3.

</p><p class="rfcparagraph">            (HINC)  A horizontal increment is a single character.

</p><p class="rfcparagraph">               In the present implementation, HINC is ignored and a
               standard spacing is supplied as follows.
                  LVH:

</p><p class="rfcparagraph">                     0: 3 units

                     1: 6 units

                     2: 12 units

                     3: 18 units

                  non-LVH:

</p><p class="rfcparagraph">                     0: 4.5 units

                     1: 9 units

                     2: 18 units

                     3: 27 units

            (FONTS)  A font specification is a single character.

</p><p class="rfcparagraph">               In the present implementation, the font is stored but
               does not affect the display.

</p><p class="rfcparagraph">            (outxy)  An output X-Y coordinate pair is encoded in four
            characters as follows:

</p><p class="rfcparagraph">               1st: X,bits(0:5) + 40B

               2nd: X,bits(6:11) + 40B

               3rd: Y,bits(0:5) + 40B

               4th: Y,bits(6:11) + 40B

            (inxy)  An input X-Y coordinate pair is encoded in four
            characters as follows:

</p><p class="rfcparagraph">            LVH:  see (outxy) above.

</p><p class="rfcparagraph">            non-LVH:  as above, except that each 12-bit coordinate is
            actually of the form 1400B+40B*[v/9]+(v MOD 9), where the
            actual coordinate is 0<=v<=719.

</p><p class="rfcparagraph">                  This means there are actually fewer points on each
                  axis.
            (string)  A string is just the requisite number of
            characters.

</p><p class="rfcparagraph">               Control characters will be displayed as a distinctive
               blot.

</p><p class="rfcparagraph">         Each display operation has a corresponding message.

</p><p class="rfcparagraph">            01B - ADA (assign display area)

               Followed by (da) NSTRS CSIZE HINC FONT.

</p><p class="rfcparagraph">            02B - DDA (delete display area)

               Followed by (da).

</p><p class="rfcparagraph">            04B - STRDA (string display)

               Followed by (da) STRID RETAIN (xy) FORMAT [CSIZE] [HINC]
               [FONT] (string).

</p><p class="rfcparagraph">                  Format specifies whether each of CSIZE, HINC, and FONT
                  is to come from the display area default, the current
                  value for the string, or the message.

</p><p class="rfcparagraph">                     The bits are: 0 0 STF STI STC RDF RDI RDC.

</p><p class="rfcparagraph">                     RDF=1 means read the FONT from the message.

</p><p class="rfcparagraph">                     RDF=0, STF=1 means use the old value from the
                     string.

</p><p class="rfcparagraph">                     RDF=0, STF=0 means use the display area default.

</p><p class="rfcparagraph">                     The pairs RDI-STI and RDC-STC specify HINC and
                     CSIZE in the same way.

</p><p class="rfcparagraph">            05B - SCSR (set cursor string)

               Followed by RETAIN CSIZE HINC FONT (string).

</p><p class="rfcparagraph">            06B - SDDA (suppress display of da)

               Followed by (da) KILL.

</p><p class="rfcparagraph">                  KILL#0 means delete all strings in this display area.

</p><p class="rfcparagraph">                  KILL=0 means retain the strings.
            07B - RDDA (restore display of da)

               Followed by (da).

</p><p class="rfcparagraph">            10B - SDDA (suppress display of string)

               Followed by (da) STRID KILL.

</p><p class="rfcparagraph">                  KILL#0 means delete the string.

</p><p class="rfcparagraph">                  KILL=0 means retain the string.

</p><p class="rfcparagraph">            11B - RSLA (restore display of string)

               Followed by (da) STRID.

</p><p class="rfcparagraph">            12B - TSNDA (turn teletype simulation on)

            13B - TSFDA (turn teletype simulation off)

            14B - Long input mode

               Puts the IMLAC into the mode where it sends coordinate
               information in a message with every character.

</p><p class="rfcparagraph">                  This is the normal operating mode for the IMLAC.

</p><p class="rfcparagraph">            15B - Short input mode

               Puts the IMLAC into the mode where it outputs characters
               literally, just like a teletype.

</p><p class="rfcparagraph">                  The IMLAC starts out in this mode when turned on.

</p><p class="rfcparagraph">         A string of 10 ESC characters, followed by a non-ESC, indicates
         an emergency - the IMLAC reinitializes itself and goes into
         short input and teletype simulation modes.

</p><p class="rfcparagraph">      All other (control) characters are ignored.

</p><p class="rfcparagraph">   Messages sent from IMLAC to TENEX:

</p><p class="rfcparagraph">      Short input mode:

</p><p class="rfcparagraph">         Every character typed on the keyboard is transmitted literally.
      Long input mode:

</p><p class="rfcparagraph">         Every message begins with ESC and a count of subsequent
         characters.

</p><p class="rfcparagraph">            Codes 40B-177B represent keyboard input.

</p><p class="rfcparagraph">               Note that the IMLAC does not echo these characters on the
               display.

</p><p class="rfcparagraph">            Codes 00B-37B, except ESC, represent typed-in control
            characters.

</p><p class="rfcparagraph">               The present implementation allows the user to generate
               all of these codes from the keyboard.

</p><p class="rfcparagraph">            ESC may be followed by a keyset-mouse code or a control
            character.

</p><p class="rfcparagraph">               Code 00B represents an ESC typed on the keyboard.

</p><p class="rfcparagraph">               Otherwise, a code 40B-77B and a code 100B-107B follow.

</p><p class="rfcparagraph">                  This type of message is sent whenever the mouse
                  buttons change or a character has been typed on the
                  keyset, and the IMLAC cannot convert this to an
                  ordinary character.

</p><p class="rfcparagraph">                     The IMLAC converts recognizable keyset chords and
                     mouse changes to characters; see SRI-ARC
                     documentation for a full discussion of this
                     hardware.

</p><p class="rfcparagraph">                  The codes 40B-77B represent accumulated keyset chords.

</p><p class="rfcparagraph">                     40B means no complete chord has been struck.

</p><p class="rfcparagraph">                  The codes 100B-107B represent the state of the mouse
                  buttons after a change:  a 1-bit corresponds to a
                  depressed button.

</p><p class="rfcparagraph">               Other codes should not appear.

</p><p class="rfcparagraph">            All codes are followed by the (inxy) coordinates of the
            mouse.

</p><p class="rfcparagraph">               This means 7 or 8 characters are sent for each character
               typed.
(V)  Division of responsibility

   The first criterion in design of the system just described was to
   allocate sufficient validity checking to the PDP-10 to make it
   unnecessary for the IMLAC to send a response for each command.

</p><p class="rfcparagraph">      Thus, the PDP-10 allocates and checks display area identifiers and
      string numbers.

</p><p class="rfcparagraph">      In the present implementation, display areas are numbered system-
      wide whereas strings are numbered from 1 to N within a display
      area.

</p><p class="rfcparagraph">   The only errors not detectable by the PDP-10 are transmission parity
   errors and overflow of the IMLAC's memory.

</p><p class="rfcparagraph">      The former are presently not corrected, but could be handled by
      any standard technique.

</p><p class="rfcparagraph">      The latter are in principle detectable by the PDP-10, since the
      amount of space required to store a given display is fairly simply
      computable.

</p><p class="rfcparagraph">         If the IMLAC runs out of space, it deletes lines from the top
         of the teletype simulation display, until only three are left,
         before giving up.

</p><p class="rfcparagraph">   A secondary criterion was to hold down the number of characters
   required to represent a display command.

</p><p class="rfcparagraph">   We have found two problem areas and two areas in which we expect to
   expand the IMLAC's capability.

</p><p class="rfcparagraph">      Echoing was relegated to TENEX since we desired to avoid the
      well-known complications associated with remote echoing.

</p><p class="rfcparagraph">      The question of identifying a device as an IMLAC to TENEX gave us
      a great deal of trouble.

</p><p class="rfcparagraph">         We settled on the convention of a TENEX Executive command which
         causes TENEX to send the "Long input mode" message.

</p><p class="rfcparagraph">            The IMLAC starts out in short input mode.

</p><p class="rfcparagraph">         The TENEX character input routines also may be set into either
         long or short mode.

</p><p class="rfcparagraph">            Their state is changed by the TSNDA and TSFDA system calls.
            In short mode, (TSNDA last), short input is passed
            literally, and only the character is passed from long input.

</p><p class="rfcparagraph">            In long mode (TSFDA last), short input is padded with all-
            zero coordinates, and long input is passed literally.

</p><p class="rfcparagraph">            This arrangement allows TENEX programs which do not use the
            special features of the IMLAC to operate correctly with
            either an IMLAC or a teletype.

</p><p class="rfcparagraph">            The user may restore the IMLAC to short mode with another
            command or with a special key on the IMLAC keyboard.

</p><p class="rfcparagraph">         Code is ready to allow the IMLAC to collect entire literal
         strings with some internal editing before sending them to
         TENEX.

</p><p class="rfcparagraph">            We have not resolved the disposition of characters typed by
            the user between the typed command initiating literal input
            and the receipt by the IMLAC of the "collect literal"
            message.

</p><p class="rfcparagraph">         With 8K of core, the IMLAC can handle a significant fraction of
         the command parsing and feedback functions of the SRI-ARC On-
         Line System (NLS), for which this effort is principally
         intended.

</p>
             [This RFC was put into machine readable form for entry]
             [into the online RFC archives by Lorrie Shiota, 10/01]





















Deutsch                                                        [Page 16]


      </td>
      <td class=code>
        <div class='highlight'>
            <!--
            <b>Related Stack Overflow questions:</b>
            <ul>
                
            </ul>
            -->
        </div>
      </td>
    </tr>
  </table>
</div>
</body>