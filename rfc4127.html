<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title></title>
  <link rel="stylesheet" href="static/css/rfc.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1></h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-'>
      <td class=docs>
        <p class="rfcparagraph"><p>Network Working Group                                F. Le Faucheur, Ed.<br>Request for Comments: 4127                           Cisco Systems, Inc.<br>Category: Experimental                                         June 2005<br><br></p>
                  <h1>
            Russian Dolls Bandwidth Constraints Model for
                Diffserv-aware MPLS Traffic Engineering</h1>
                  <h2>Status of This Memo</h2>

   This memo defines an Experimental Protocol for the Internet
   community.  It does not specify an Internet standard of any kind.
   Discussion and suggestions for improvement are requested.
   Distribution of this memo is unlimited.

</p><p class="rfcparagraph"><h2>Copyright Notice</h2>

   Copyright (C) The Internet Society (2005).<br>

</p><p class="rfcparagraph"><h2>Abstract</h2>

   This document provides specifications for one Bandwidth Constraints
   Model for Diffserv-aware MPLS Traffic Engineering, which is referred
   to as the Russian Dolls Model.

</p><p class="rfcparagraph">Table of Contents
<a href="#section-1" class="">1. Introduction ...................................................</a><br>
<a href="#section-1.1" class="indent-1">1.1. Specification of Requirements .............................</a><br>
<a href="#section-2" class="">2. Contributing Authors ...........................................</a><br>
<a href="#section-3" class="">3. Definitions ....................................................</a><br>
<a href="#section-4" class="">4. Russian Dolls Model Definition .................................</a><br>
   5. Example Formulas for Computing "Unreserved TE-Class [i]" with
      Russian Dolls Model .............................................7
   6. Receiving Both Maximum Reservable Bandwidth and Bandwidth
      Constraints sub-TLVs ............................................8
<a href="#section-7" class="">7. Security Considerations ........................................</a><br>
<a href="#section-8" class="">8. IANA Considerations ............................................</a><br>
<a href="#section-9" class="">9. Acknowledgements ...............................................</a><br>
   Appendix A: Addressing [DSTE-REQ] Scenarios .......................10
   Normative References ..............................................11
   Informative References ............................................12
	<a name="section-1"><h2>1.   Introduction</h2></a>

   [DSTE-REQ] presents the Service Providers requirements for support of
   Diffserv-aware MPLS Traffic Engineering (DS-TE).  This includes the
   fundamental requirement to be able to enforce different Bandwidth
   Constraints for different classes of traffic.

</p><p class="rfcparagraph">   [DSTE-REQ] also defines the concept of Bandwidth Constraints Model
   for DS-TE and states that "The DS-TE technical solution MUST specify
   at least one Bandwidth Constraints Model and MAY specify multiple
   Bandwidth Constraints Models".

</p><p class="rfcparagraph">   This document provides a detailed description of one particular
   Bandwidth Constraints Model for DS-TE which is introduced in
   [DSTE-REQ] and called the Russian Dolls Model (RDM).

</p><p class="rfcparagraph">   [DSTE-PROTO] specifies the Interior Gateway Protocol (IGP) and RSVP-
   TE signaling extensions for support of DS-TE.  These extensions
   support RDM.

</p><p class="rfcparagraph">	<a name="section-1.1"><h3>1.1   Specification of Requirements</h3></a>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].
	<a name="section-2"><h2>2.   Contributing Authors</h2></a>

   This document was the collective work of several authors.  The text
   and content were contributed by the editor and the co-authors listed
   below. (The contact information for the editor appears in the
   Editor's Address section.)

   Jim Boyle                               Kireeti Kompella
   Protocol Driven Networks, Inc.          Juniper Networks, Inc.
   1381 Kildaire Farm Road #288            1194 N. Mathilda Ave.
   Cary, NC 27511, USA                     Sunnyvale, CA 94099

   Phone: (919) 852-5160                   EMail: kireeti@juniper.net<br>
   EMail: jboyle@pdnets.com


   William Townsend                        Thomas D. Nadeau
   Tenor Networks                          Cisco Systems, Inc.
   100 Nagog Park                          250 Apollo Drive
   Acton, MA 01720                         Chelmsford, MA 01824

   Phone: +1-978-264-4900                  Phone: +1-978-244-3051
   EMail: btownsend@tenornetworks.com      EMail: tnadeau@cisco.com


   Darek Skalecki
   Nortel Networks
   3500 Carling Ave,
   Nepean K2H 8E9

   Phone: +1-613-765-2252
   EMail: dareks@nortelnetworks.com
	<a name="section-3"><h2>3.   Definitions</h2></a>

   For readability a number of definitions from [DSTE-REQ] are repeated
   here:

</p><p class="rfcparagraph">   Class-Type (CT): the set of Traffic Trunks crossing a link that is
                    governed by a specific set of bandwidth constraints.
                    CT is used for the purposes of link bandwidth
                    allocation, constraint-based routing and admission
                    control.  A given Traffic Trunk belongs to the same
                    CT on all links.

</p><p class="rfcparagraph">   TE-Class:        A pair of:

</p><p class="rfcparagraph">                    i.  a Class-Type

                    ii. a preemption priority allowed for that Class-
                    Type.  This means that an LSP transporting a Traffic
                    Trunk from that Class-Type can use that preemption
                    priority as the setup priority, the holding
                    priority, or both.

</p><p class="rfcparagraph">   A number of recovery mechanisms under investigation or specification
   in the IETF take advantage of the concept of bandwidth sharing across
   particular sets of LSPs.  "Shared Mesh Restoration" in [GMPLS-RECOV]
   and "Facility-based Computation Model" in [MPLS-BACKUP] are example
   mechanisms that increase bandwidth efficiency by sharing bandwidth
   across backup LSPs protecting against independent failures.  To
   ensure that the notion of "Reserved (CTc)" introduced in [DSTE-REQ]
   is compatible with such a concept of bandwidth sharing across
   multiple LSPs, the wording of the "Reserved (CTc)" definition
   provided in [DSTE-REQ] is generalized into the following:

</p><p class="rfcparagraph">   Reserved (CTc):  For a given Class-Type CTc ( 0 <= c <= MaxCT ), let
                    us define "Reserved(CTc)" as the total amount of the
                    bandwidth reserved by all the established LSPs which
                    belong to CTc.

</p><p class="rfcparagraph">   With this generalization, the Russian Dolls Model definition provided
   in this document is compatible with Shared Mesh Restoration defined
   in [GMPLS-RECOV], so that DS-TE and Shared Mesh Protection can
   operate simultaneously.  This assumes that Shared Mesh Restoration
   operates independently within each DS-TE Class-Type and does not
   operate across Class-Types (for example, backup LSPs protecting
   Primary LSPs of CTx also need to belong to CTx; Excess Traffic LSPs
   sharing bandwidth with Backup LSPs of CTx also need to belong to
   CTx).
   We also introduce the following definition:

</p><p class="rfcparagraph">   Reserved(CTb,q): Let us define "Reserved(CTb,q)" as the total amount
                    of the bandwidth reserved by all the established
                    LSPs that belong to CTb and have a holding priority
                    of q.  Note that if q and CTb do not form one of the
                    8 possible configured TE-Classes, then there cannot
                    be any established LSPs that belongs to CTb and has
                    a holding priority of q; therefore, in this case,
                    Reserved(CTb,q) = 0.

</p><p class="rfcparagraph">	<a name="section-4"><h2>4.   Russian Dolls Model Definition</h2></a>

   RDM is defined in the following manner:

</p><p class="rfcparagraph">        o Maximum Number of Bandwidth Constraints (MaxBC)=
             Maximum Number of Class-Types (MaxCT) = 8

        o for each value of b in the range 0 <= b <= (MaxCT - 1):
             SUM (Reserved (CTc)) <= BCb,
             where the SUM is across all values of c in the
             range b <= c <= (MaxCT - 1)

        o BC0= Maximum Reservable Bandwidth, so that
             SUM (Reserved(CTc)) <= Max-Reservable-Bw,
             where the SUM is across all values of c in the
             range  0 <= c <= (MaxCT - 1)

   A DS-TE LSR implementing RDM MUST support enforcement of Bandwidth
   Constraints in compliance with this definition.

</p><p class="rfcparagraph">   Both preemption within a CT and across CTs is allowed.

</p><p class="rfcparagraph">   Where 8 CTs are active, the RDM Bandwidth Constraints can also be
   expressed in the following way:

</p><p class="rfcparagraph">      - All LSPs from CT7 use no more than BC7

      - All LSPs from CT6 and CT7 use no more than BC6

      - All LSPs from CT5, CT6 and CT7 use no more than BC5

      - etc.

</p><p class="rfcparagraph">      - All LSPs from CT0, CT1, ..., CT7 use no more than BC0 = "Maximum
        Reservable Bandwidth"
   Purely for illustration purposes, the diagram below represents the
   Russian Dolls Bandwidth Constraints Model in a pictorial manner when
   3 Class-Types are active:

</p><p class="rfcparagraph">   I------------------------------------------------------I
   I-------------------------------I                      I
   I--------------I                I                      I
   I    CT2       I    CT2+CT1     I      CT2+CT1+CT0     I
   I--------------I                I                      I
   I-------------------------------I                      I
   I------------------------------------------------------I

   I-----BC2------>
   I----------------------BC1------>
   I------------------------------BC0=Max Reservable Bw--->

   While simpler Bandwidth Constraints models or, conversely, more
   flexible/sophisticated Bandwidth Constraints models can be defined,
   the Russian Dolls Model is attractive in some DS-TE environments for
   the following reasons:

</p><p class="rfcparagraph">      - Although it is a little less intuitive than the Maximum
        Allocation Model (see [DSTE-MAM]), RDM is still a simple model
        to conceptualize.

</p><p class="rfcparagraph">      - RDM can be used simultaneously to ensure bandwidth efficiency
        and to protect against QoS degradation of all CTs, whether
        preemption is used or not.

</p><p class="rfcparagraph">      - RDM can be used in conjunction with preemption to simultaneously
        achieve (i) isolation across CTs (so that each CT is guaranteed
        its share of bandwidth no matter the level of contention by
        other classes), (ii) bandwidth efficiency, and (iii) protection
        against QoS degradation of all CTs.

</p><p class="rfcparagraph">      - RDM only requires limited protocol extensions such as the ones
        defined in [DSTE-PROTO].

</p><p class="rfcparagraph">   RDM may not be attractive in some DS-TE environments for the
   following reasons:

</p><p class="rfcparagraph">      - if the usage of preemption is precluded for some administrative
        reason, while RDM can still ensure bandwidth efficiency and
        protection against QoS degradation of all CTs, RDM cannot
        guarantee isolation across Class-Types.

</p><p class="rfcparagraph">   Additional considerations on the properties of RDM can be found in
   [BC-CONS] and [BC-MODEL].
   As a simple example usage of the "Russian Dolls" Bandwidth
   Constraints Model, a network administrator, using one CT for Voice
   (CT1) and one CT for data (CT0), might configure on a given link:

</p><p class="rfcparagraph">      - BC0 = Max-Reservable - Bw = 2.5 Gb/s (i.e., Voice + Data is
        limited to 2.5 Gb/s)

      - BC1 = 1.5 Gb/s (i.e., Voice is limited to 1.5 Gb/s).

</p><p class="rfcparagraph">	<a name="section-5"><h2>5.   Example Formulas for Computing "Unreserved TE-Class [i]" with</h2></a>
    Russian Dolls Model

   As specified in [DSTE-PROTO], formulas for computing "Unreserved TE-
   Class [i]" MUST reflect all of the Bandwidth Constraints relevant to
   the CT associated with TE-Class[i], and thus, depend on the Bandwidth
   Constraints Model.  Thus, a DS-TE LSR implementing RDM MUST reflect
   the RDM Bandwidth Constraints defined in section 4 above when
   computing "Unreserved TE-Class [i]".

</p><p class="rfcparagraph">   As explained in [DSTE-PROTO], the details of admission control
   algorithms, as well as formulas for computing "Unreserved TE-Class
   [i]", are outside the scope of the IETF work.  Keeping that in mind,
   we provide in this section an example for illustration purposes, of
   how values for the unreserved bandwidth for TE-Class[i] might be
   computed with RDM.  In the example, we assume the basic admission
   control algorithm, which simply deducts the exact bandwidth of any
   established LSP from all of the Bandwidth Constraints relevant to the
   CT associated with that LSP.

</p><p class="rfcparagraph">   We assume that:

</p><p class="rfcparagraph">        TE-Class [i] <--> < CTc , preemption p>

   in the configured TE-Class mapping.

</p><p class="rfcparagraph">   For readability, formulas are first shown assuming only 3 CTs are
   active.  The formulas are then extended to cover the cases where more
   CTs are used.

</p><p class="rfcparagraph">   If CTc = CT0, then "Unreserved TE-Class [i]" =
      [ BC0 - SUM ( Reserved(CTb,q) ) ] for q <= p and 0 <= b <= 2

   If CTc = CT1, then "Unreserved TE-Class [i]" =
      MIN  [
      [ BC1 - SUM ( Reserved(CTb,q) ) ] for q <= p and 1 <= b <= 2,
      [ BC0 - SUM ( Reserved(CTb,q) ) ] for q <= p and 0 <= b <= 2
             ]
   If CTc = CT2, then "Unreserved TE-Class [i]" =
      MIN  [
      [ BC2 - SUM ( Reserved(CTb,q) ) ] for q <= p and 2 <= b <= 2,
      [ BC1 - SUM ( Reserved(CTb,q) ) ] for q <= p and 1 <= b <= 2,
      [ BC0 - SUM ( Reserved(CTb,q) ) ] for q <= p and 0 <= b <= 2
             ]

   The formula can be generalized to 8 active CTs and expressed in a
   more compact way in the following:

</p><p class="rfcparagraph">     "Unreserved TE-Class [i]" =
      MIN  [
    [ BCc - SUM ( Reserved(CTb,q) ) ] for q <= p and c <= b <= 7,
    [ BC(c-1) - SUM ( Reserved(CTb,q) ) ] for q <= p and (c-1)<= b <= 7,
        . . .
    [ BC0 - SUM ( Reserved(CTb,q) ) ] for q <= p and 0 <= b <= 7,
           ]

      where:

</p><p class="rfcparagraph">        TE-Class [i] <--> < CTc , preemption p>
        in the configured TE-Class mapping.

</p><p class="rfcparagraph">	<a name="section-6"><h2>6.   Receiving Both Maximum Reservable Bandwidth and Bandwidth</h2></a>
    Constraints sub-TLVs

   [DSTE-PROTO] states that "A DS-TE LSR, which does advertise BCs, MUST
   use the new "Bandwidth Constraints" sub-TLV (in addition to the
   existing Maximum Reservable Bandwidth sub-TLV) to do so."

   With RDM, BC0 is equal to the Maximum Reservable Bandwidth because
   they both represent the aggregate constraint across all CTs.  Thus, a
   DS-TE LSR, receiving both the "Maximum Reservable Bw" sub-TLV and the
   new "Bandwidth Constraints" sub-TLV (which contains BC0) for a given
   link where the RDM model is used, MAY ignore the "Maximum Reservable
   Bw" sub-TLV.

</p><p class="rfcparagraph">	<a name="section-7"><h2>7.   Security Considerations</h2></a>

   Security considerations related to the use of DS-TE are discussed in
   [DSTE-PROTO].  Those apply independently of the Bandwidth Constraints
   Model, including RDM specified in this document.

</p><p class="rfcparagraph">	<a name="section-8"><h2>8.   IANA Considerations</h2></a>

   [DSTE-PROTO] defines a new name space for "Bandwidth Constraints
   Model Id".  The guidelines for allocation of values in that name
   space are detailed in section 13.1 of [DSTE-PROTO].  In accordance
   with these guidelines, the IANA has assigned a Bandwidth Constraints
   Model Id for RDM from the range 0-239 (which is to be managed as per
   the "Specification Required" policy defined in [IANA-CONS]).

</p><p class="rfcparagraph">   Bandwidth Constraints Model Id 0 was allocated by IANA to RDM.

</p><p class="rfcparagraph">	<a name="section-9"><h2>9.   Acknowledgements</h2></a>

   We thank Martin Tatham for his key contribution in this work.
   Tatiana Renko is also warmly thanked for her instantiation of the
   Russian Doll.
Appendix A: Addressing [DSTE-REQ] Scenarios

   This appendix provides examples of how the Russian Dolls Bandwidth
   Constraints Model can be used to support each of the scenarios
   described in [DSTE-REQ].

</p><p class="rfcparagraph">A.1.  Scenario 1: Limiting Amount of Voice

   By configuring on every link:

</p><p class="rfcparagraph">      - Bandwidth Constraint 1 (for CT1 = Voice) = "certain percentage"
        of link capacity

      - BC0 (for CT1=Voice + CT0=Data) = link capacity

   By configuring:

</p><p class="rfcparagraph">      - every CT1/Voice TE-LSP with preemption = 0

      - every CT0/Data TE-LSP with preemption = 1

   DS-TE with the Russian Dolls Model will address all the requirements:

</p><p class="rfcparagraph">      - amount of Voice traffic limited to desired percentage on every
        link

      - data traffic capable of using all remaining link capacity

      - voice traffic capable of preempting other traffic

A.2.  Scenario 2: Maintain Relative Proportion of Traffic Classes

   By configuring on every link:

</p><p class="rfcparagraph">      - BC2 (for CT2) = e.g., 45%

      - BC1 (for CT1+CT2) = e.g., 80%

      - BC0 (for CT0+CT1+CT2) = e.g., 100%

   DS-TE with the RDM will ensure that the amount of traffic of each CT
   established on a link is within acceptable levels as compared to the
   resources allocated to the corresponding Diffserv Per Hop Behaviors
   (PHBs) regardless of which order the LSPs are routed in, regardless
   of which preemption priorities are used by which LSPs and regardless
   of failure situations.
   By also configuring:

</p><p class="rfcparagraph">      - every CT2/Voice TE-LSP with preemption = 0

      - every CT1/Premium Data TE-LSP with preemption = 1

      - every CT0/Best-Effort TE-LSP with preemption = 2

   DS-TE with the Russian Dolls Model will also ensure that:

</p><p class="rfcparagraph">      - CT2 Voice LSPs always have first preemption priority in order to
        use the CT2 capacity

      - CT1 Premium Data LSPs always have second preemption priority in
        order to use the CT1 capacity

      - Best-Effort can use up to link capacity of what is left by CT2
        and CT1.

</p><p class="rfcparagraph">   Optional automatic adjustment of Diffserv scheduling configuration
   could be used for maintaining very strict relationships between the
   amounts of established traffic of each Class Type and corresponding
   Diffserv resources.

</p><p class="rfcparagraph">A.3.  Scenario 3: Guaranteed Bandwidth Services

   By configuring on every link:

</p><p class="rfcparagraph">      - BC1 (for CT1) = "given" percentage of link bandwidth
        (appropriate to achieve the Guaranteed Bandwidth service's QoS
        objectives)

      - BC0 (for CT0+CT1) = 100% of link bandwidth

   DS-TE with the Russian Dolls Model will ensure that the amount of
   Guaranteed Bandwidth Traffic established on every link remains below
   the given percentage so that it will always meet its QoS objectives.
   At the same time, it will allow traffic engineering of the rest of
   the traffic such that links can be filled up.

</p><p class="rfcparagraph">Normative References

   [DSTE-REQ]    Le Faucheur, F. and W. Lai, "Requirements for Support
                 of Differentiated Services-aware MPLS Traffic
                 Engineering", RFC 3564, July 2003.
   [DSTE-PROTO]  Le Faucheur, F., Ed., "Protocol Extensions for Support
                 of Diffserv-aware MPLS Traffic Engineering", RFC 4124,
                 June 2005.

</p><p class="rfcparagraph">   [RFC2119]     Bradner, S., "Key words for use in RFCs to Indicate
                 Requirement Levels", BCP 14, RFC 2119, March 1997.

</p><p class="rfcparagraph">   [IANA-CONS]   Narten, T. and H. Alvestrand, "Guidelines for Writing
                 an IANA Considerations Section in RFCs", BCP 26, RFC
                 2434, October 1998.

</p><p class="rfcparagraph">Informative References

   [BC-CONS]     Le Faucheur, F., "Considerations on Bandwidth
                 Constraints Model for DS-TE", Work in Progress, June
                 2002.

</p><p class="rfcparagraph">   [BC-MODEL]    Lai, W., "Bandwidth Constraints Models for
                 Differentiated Services (Diffserv)-aware MPLS Traffic
                 Engineering:  Performance Evaluation", RFC 4128, June
                 2005.

</p><p class="rfcparagraph">   [DSTE-MAM]    Le Faucheur, F. and W. Lai, "Maximum Allocation
                 Bandwidth Constraints Model for Diffserv-aware MPLS
                 Traffic Engineering", RFC 4125, June 2005.

</p><p class="rfcparagraph">   [GMPLS-RECOV] Lang, et al., "Generalized MPLS Recovery Functional
                 Specification", Work in Progress.

</p><p class="rfcparagraph">   [MPLS-BACKUP] Vasseur, et al., "MPLS Traffic Engineering Fast
                 Reroute:  Bypass Tunnel Path Computation for Bandwidth
                 Protection", Work in Progress.

</p><p class="rfcparagraph">Editor's Address

   Francois Le Faucheur
   Cisco Systems, Inc.
   Village d'Entreprise Green Side - Batiment T3
   400, Avenue de Roumanille
   06410 Biot-Sophia Antipolis
   France

   Phone: +33 4 97 23 26 19
   EMail: flefauch@cisco.com
Full Copyright Statement

   Copyright (C) The Internet Society (2005).<br>

</p><p class="rfcparagraph">   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

</p><p class="rfcparagraph">   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

</p><p class="rfcparagraph">Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

</p><p class="rfcparagraph">   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

</p><p class="rfcparagraph">   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

</p><p class="rfcparagraph">Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.

</p>





Le Faucheur                   Experimental                     [Page 13]


      </td>
      <td class=code>
        <div class='highlight'>
            <!--
            <b>Related Stack Overflow questions:</b>
            <ul>
                
            </ul>
            -->
        </div>
      </td>
    </tr>
  </table>
</div>
</body>