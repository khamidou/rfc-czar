<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title></title>
  <link rel="stylesheet" href="rfc.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1></h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-'>
      <td class=docs>
        <p class="rfcparagraph"><p>Network Working Group                                           C. Kalt<br>Request for Comments: 2810                                   April 2000<br>Updates: 1459<br>Category: Informational<br><br></p>
                  <h1>
                   Internet Relay Chat: Architecture</h1>
                  <h2>Status of this Memo</h2>

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

</p><p class="rfcparagraph"><h2>Copyright Notice</h2>

   Copyright (C) The Internet Society (2000).  All Rights Reserved.<br>

</p><p class="rfcparagraph"><h2>Abstract</h2>

   The IRC (Internet Relay Chat) protocol is for use with text based
   conferencing. It has been developed since 1989 when it was originally
   implemented as a mean for users on a BBS to chat amongst themselves.

</p><p class="rfcparagraph">   First formally documented in May 1993 by RFC 1459 [IRC], the protocol
   has kept evolving. This document is an update describing the
   architecture of the current IRC protocol and the role of its
   different components.  Other documents describe in detail the
   protocol used between the various components defined here.

</p><p class="rfcparagraph">Table of Contents
<a href="#section-1" class="">1. Introduction ..............................................</a><br>
<a href="#section-2" class="">2. Components ................................................</a><br>
<a href="#section-2.1" class="indent-1">2.1 Servers ...............................................</a><br>
<a href="#section-2.2" class="indent-1">2.2 Clients ...............................................</a><br>
<a href="#section-2.2.1" class="indent-2">2.2.1 User Clients .....................................</a><br>
<a href="#section-2.2.2" class="indent-2">2.2.2 Service Clients ..................................</a><br>
<a href="#section-3" class="">3. Architecture ..............................................</a><br>
<a href="#section-4" class="">4. IRC Protocol Services .....................................</a><br>
<a href="#section-4.1" class="indent-1">4.1 Client Locator ........................................</a><br>
<a href="#section-4.2" class="indent-1">4.2 Message Relaying ......................................</a><br>
<a href="#section-4.3" class="indent-1">4.3 Channel Hosting And Management ........................</a><br>
<a href="#section-5" class="">5. IRC Concepts ..............................................</a><br>
<a href="#section-5.1" class="indent-1">5.1 One-To-One Communication ..............................</a><br>
<a href="#section-5.2" class="indent-1">5.2 One-To-Many ...........................................</a><br>
<a href="#section-5.2.1" class="indent-2">5.2.1 To A Channel .....................................</a><br>
<a href="#section-5.2.2" class="indent-2">5.2.2 To A Host/Server Mask ............................</a><br>
<a href="#section-5.2.3" class="indent-2">5.2.3 To A List ........................................</a><br>
<a href="#section-5.3" class="indent-1">5.3 One-To-All ............................................</a><br>
<a href="#section-5.3.1" class="indent-2">5.3.1 Client-to-Client .................................</a><br>
<a href="#section-5.3.2" class="indent-2">5.3.2 Client-to-Server .................................</a><br>
<a href="#section-5.3.3" class="indent-2">5.3.3 Server-to-Server .................................</a><br>
<a href="#section-6" class="">6. Current Problems ..........................................</a><br>
<a href="#section-6.1" class="indent-1">6.1 Scalability ...........................................</a><br>
<a href="#section-6.2" class="indent-1">6.2 Reliability ...........................................</a><br>
<a href="#section-6.3" class="indent-1">6.3 Network Congestion ....................................</a><br>
<a href="#section-6.4" class="indent-1">6.4 Privacy ...............................................</a><br>
<a href="#section-7" class="">7. Security Considerations ...................................</a><br>
<a href="#section-8" class="">8. Current Support And Availability ..........................</a><br>
<a href="#section-9" class="">9. Acknowledgements ..........................................</a><br>
<a href="#section-10" class="">10. References ...............................................</a><br>
<a href="#section-11" class="">11. Author's Address .........................................</a><br>
<a href="#section-12" class="">12. Full Copyright Statement .................................</a><br>

	<a name="section-1"><h2>1.  Introduction</h2></a>

   The IRC (Internet Relay Chat) protocol has been designed over a
   number of years for use with text based conferencing.  This document
   describes its current architecture.

</p><p class="rfcparagraph">   The IRC Protocol is based on the client-server model, and is well
   suited to running on many machines in a distributed fashion.  A
   typical setup involves a single process (the server) forming a
   central point for clients (or other servers) to connect to,
   performing the required message delivery/multiplexing and other
   functions.

</p><p class="rfcparagraph">   This distributed model, which requires each server to have a copy
   of the global state information, is still the most flagrant problem
   of the protocol as it is a serious handicap, which limits the maximum
   size a network can reach.  If the existing networks have been able to
   keep growing at an incredible pace, we must thank hardware
   manufacturers for giving us ever more powerful systems.

</p><p class="rfcparagraph">	<a name="section-2"><h2>2.  Components</h2></a>

   The following paragraphs define the basic components of the IRC
   protocol.

</p><p class="rfcparagraph">	<a name="section-2.1"><h3>2.1  Servers</h3></a>

   The server forms the backbone of IRC as it is the only component
   of the protocol which is able to link all the other components
   together: it provides a point to which clients may connect to talk to
   each other [IRC-CLIENT], and a point for other servers to connect to
   [IRC-SERVER].  The server is also responsible for providing the basic
   services defined by the IRC protocol.

</p><p class="rfcparagraph">	<a name="section-2.2"><h3>2.2  Clients</h3></a>

   A client is anything connecting to a server that is not another
   server.  There are two types of clients which both serve a different
   purpose.

</p><p class="rfcparagraph">	<a name="section-2.2.1"><h4>2.2.1  User Clients</h4></a>

   User clients are generally programs providing a text based
   interface that is used to communicate interactively via IRC.  This
   particular type of clients is often referred as "users".

</p><p class="rfcparagraph">	<a name="section-2.2.2"><h4>2.2.2  Service Clients</h4></a>

   Unlike users, service clients are not intended to be used manually
   nor for talking.  They have a more limited access to the chat
   functions of the protocol, while optionally having access to more
   private data from the servers.

</p><p class="rfcparagraph">   Services are typically automatons used to provide some kind of
   service (not necessarily related to IRC itself) to users.  An example
   is a service collecting statistics about the origin of users
   connected on the IRC network.

</p><p class="rfcparagraph">	<a name="section-3"><h2>3.  Architecture</h2></a>

   An IRC network is defined by a group of servers connected to each
   other.  A single server forms the simplest IRC network.

</p><p class="rfcparagraph">   The only network configuration allowed for IRC servers is that of
   a spanning tree where each server acts as a central node for the rest
   of the network it sees.

</p><p class="rfcparagraph">                       1--\
                           A        D---4
                       2--/ \      /
                             B----C
                            /      \
                           3        E

   Servers: A, B, C, D, E         Clients: 1, 2, 3, 4

                    [ Fig. 1. Sample small IRC network ]
   The IRC protocol provides no mean for two clients to directly
   communicate.  All communication between clients is relayed by the
   server(s).

</p><p class="rfcparagraph">	<a name="section-4"><h2>4.  IRC Protocol Services</h2></a>

   This section describes the services offered by the IRC protocol.  The
   combination of these services allow real-time conferencing.

</p><p class="rfcparagraph">	<a name="section-4.1"><h3>4.1  Client Locator</h3></a>

   To be able to exchange messages, two clients must be able to locate
   each other.

</p><p class="rfcparagraph">   Upon connecting to a server, a client registers using a label which
   is then used by other servers and clients to know where the client is
   located.  Servers are responsible for keeping track of all the labels
   being used.

</p><p class="rfcparagraph">	<a name="section-4.2"><h3>4.2  Message Relaying</h3></a>

   The IRC protocol provides no mean for two clients to directly
   communicate.  All communication between clients is relayed by the
   server(s).

</p><p class="rfcparagraph">	<a name="section-4.3"><h3>4.3  Channel Hosting And Management</h3></a>

   A channel is a named group of one or more users which will all
   receive messages addressed to that channel.  A channel is
   characterized by its name and current members, it also has a set of
   properties which can be manipulated by (some of) its members.

</p><p class="rfcparagraph">   Channels provide a mean for a message to be sent to several clients.
   Servers host channels, providing the necessary message multiplexing.
   Servers are also responsible for managing channels by keeping track
   of the channel members.  The exact role of servers is defined in
   "Internet Relay Chat: Channel Management" [IRC-CHAN].

</p><p class="rfcparagraph">	<a name="section-5"><h2>5.  IRC Concepts</h2></a>

   This section is devoted to describing the actual concepts behind the
   organization of the IRC protocol and how different classes of
   messages are delivered.
	<a name="section-5.1"><h3>5.1  One-To-One Communication</h3></a>

   Communication on a one-to-one basis is usually performed by clients,
   since most server-server traffic is not a result of servers talking
   only to each other.  To provide a means for clients to talk to each
   other, it is REQUIRED that all servers be able to send a message in
   exactly one direction along the spanning tree in order to reach any
   client.  Thus the path of a message being delivered is the shortest
   path between any two points on the spanning tree.

</p><p class="rfcparagraph">   The following examples all refer to Figure 1 above.

</p><p class="rfcparagraph">   Example 1: A message between clients 1 and 2 is only seen by server
       A, which sends it straight to client 2.

</p><p class="rfcparagraph">   Example 2: A message between clients 1 and 3 is seen by servers A &
       B, and client 3.  No other clients or servers are allowed see the
       message.

</p><p class="rfcparagraph">   Example 3: A message between clients 2 and 4 is seen by servers A, B,
       C & D and client 4 only.

</p><p class="rfcparagraph">	<a name="section-5.2"><h3>5.2  One-To-Many</h3></a>

   The main goal of IRC is to provide a forum which allows easy and
   efficient conferencing (one to many conversations).  IRC offers
   several means to achieve this, each serving its own purpose.

</p><p class="rfcparagraph">	<a name="section-5.2.1"><h4>5.2.1  To A Channel</h4></a>

   In IRC the channel has a role equivalent to that of the multicast
   group; their existence is dynamic and the actual conversation carried
   out on a channel MUST only be sent to servers which are supporting
   users on a given channel.  Moreover, the message SHALL only be sent
   once to every local link as each server is responsible to fan the
   original message to ensure that it will reach all the recipients.

</p><p class="rfcparagraph">   The following examples all refer to Figure 2.

</p><p class="rfcparagraph">   Example 4: Any channel with 1 client in it. Messages to the channel
       go to the server and then nowhere else.

</p><p class="rfcparagraph">   Example 5: 2 clients in a channel. All messages traverse a path as if
       they were private messages between the two clients outside a
       channel.
   Example 6: Clients 1, 2 and 3 in a channel.  All messages to the
       channel are sent to all clients and only those servers which must
       be traversed by the message if it were a private message to a
       single client.  If client 1 sends a message, it goes back to
       client 2 and then via server B to client 3.

</p><p class="rfcparagraph">	<a name="section-5.2.2"><h4>5.2.2  To A Host/Server Mask</h4></a>

   To provide with some mechanism to send messages to a large body of
   related users, host and server mask messages are available.  These
   messages are sent to users whose host or server information match
   that of the mask.  The messages are only sent to locations where
   users are, in a fashion similar to that of channels.

</p><p class="rfcparagraph">	<a name="section-5.2.3"><h4>5.2.3  To A List</h4></a>

   The least efficient style of one-to-many conversation is through
   clients talking to a 'list' of targets (client, channel, mask).  How
   this is done is almost self explanatory: the client gives a list of
   destinations to which the message is to be delivered and the server
   breaks it up and dispatches a separate copy of the message to each
   given destination.

</p><p class="rfcparagraph">   This is not as efficient as using a channel since the destination
   list MAY be broken up and the dispatch sent without checking to make
   sure duplicates aren't sent down each path.

</p><p class="rfcparagraph">	<a name="section-5.3"><h3>5.3  One-To-All</h3></a>

   The one-to-all type of message is better described as a broadcast
   message, sent to all clients or servers or both.  On a large network
   of users and servers, a single message can result in a lot of traffic
   being sent over the network in an effort to reach all of the desired
   destinations.

</p><p class="rfcparagraph">   For some class of messages, there is no option but to broadcast it to
   all servers so that the state information held by each server is
   consistent between servers.

</p><p class="rfcparagraph">	<a name="section-5.3.1"><h4>5.3.1  Client-to-Client</h4></a>

   There is no class of message which, from a single message, results in
   a message being sent to every other client.
	<a name="section-5.3.2"><h4>5.3.2  Client-to-Server</h4></a>

   Most of the commands which result in a change of state information
   (such as channel membership, channel mode, user status, etc.) MUST be
   sent to all servers by default, and this distribution SHALL NOT be
   changed by the client.

</p><p class="rfcparagraph">	<a name="section-5.3.3"><h4>5.3.3  Server-to-Server</h4></a>

   While most messages between servers are distributed to all 'other'
   servers, this is only required for any message that affects a user,
   channel or server.  Since these are the basic items found in IRC,
   nearly all messages originating from a server are broadcast to all
   other connected servers.

</p><p class="rfcparagraph">	<a name="section-6"><h2>6.  Current Problems</h2></a>

   There are a number of recognized problems with this protocol, this
   section only addresses the problems related to the architecture of
   the protocol.

</p><p class="rfcparagraph">	<a name="section-6.1"><h3>6.1  Scalability</h3></a>

   It is widely recognized that this protocol does not scale
   sufficiently well when used in a large arena.  The main problem comes
   from the requirement that all servers know about all other servers,
   clients and channels and that information regarding them be updated
   as soon as it changes.

</p><p class="rfcparagraph">	<a name="section-6.2"><h3>6.2  Reliability</h3></a>

   As the only network configuration allowed for IRC servers is that of
   a spanning tree, each link between two servers is an obvious and
   quite serious point of failure.  This particular issue is addressed
   more in detail in "Internet Relay Chat: Server Protocol" [IRC-
   SERVER].

</p><p class="rfcparagraph">	<a name="section-6.3"><h3>6.3  Network Congestion</h3></a>

   Another problem related to the scalability and reliability issues, as
   well as the spanning tree architecture, is that the protocol and
   architecture for IRC are extremely vulnerable to network congestions.
   This problem is endemic, and should be solved for the next
   generation: if congestion and high traffic volume cause a link
   between two servers to fail, not only this failure generates more
   network traffic, but the reconnection (eventually elsewhere) of two
   servers also generates more traffic.
   In an attempt to minimize the impact of these problems, it is
   strongly RECOMMENDED that servers do not automatically try to
   reconnect too fast, in order to avoid aggravating the situation.

</p><p class="rfcparagraph">	<a name="section-6.4"><h3>6.4  Privacy</h3></a>

   Besides not scaling well, the fact that servers need to know all
   information about other entities, the issue of privacy is also a
   concern. This is in particular true for channels, as the related
   information is quite a lot more revealing than whether a user is
   online or not.

</p><p class="rfcparagraph">	<a name="section-7"><h2>7.  Security Considerations</h2></a>

   Asides from the privacy concerns mentioned in section 6.4 (Privacy),
   security is believed to be irrelevant to this document.

</p><p class="rfcparagraph">	<a name="section-8"><h2>8.  Current Support And Availability</h2></a>

        Mailing lists for IRC related discussion:
          General discussion: ircd-users@irc.org
          Protocol development: ircd-dev@irc.org

        Software implementations:
          ftp://ftp.irc.org/irc/server
          ftp://ftp.funet.fi/pub/unix/irc
          ftp://coombs.anu.edu.au/pub/irc

        Newsgroup: alt.irc

	<a name="section-9"><h2>9.  Acknowledgements</h2></a>

   Parts of this document were copied from the RFC 1459 [IRC] which
   first formally documented the IRC Protocol.  It has also benefited
   from many rounds of review and comments.  In particular, the
   following people have made significant contributions to this
   document:

</p><p class="rfcparagraph">   Matthew Green, Michael Neumayer, Volker Paulsen, Kurt Roeckx, Vesa
   Ruokonen, Magnus Tjernstrom, Stefan Zehl.
	<a name="section-10"><h2>10.  References</h2></a>

   [KEYWORDS]   Bradner, S., "Key words for use in RFCs to Indicate
                Requirement Levels", BCP 14, RFC 2119, March 1997.

</p><p class="rfcparagraph">   [IRC]        Oikarinen, J. and D. Reed, "Internet Relay Chat
                Protocol", RFC 1459, May 1993.

</p><p class="rfcparagraph">   [IRC-CLIENT] Kalt, C., "Internet Relay Chat: Client Protocol", RFC
                2812, April 2000.

</p><p class="rfcparagraph">   [IRC-SERVER] Kalt, C., "Internet Relay Chat: Server Protocol", RFC
                2813, April 2000.

</p><p class="rfcparagraph">   [IRC-CHAN]   Kalt, C., "Internet Relay Chat: Channel Management", RFC
                2811, April 2000.

</p><p class="rfcparagraph">	<a name="section-11"><h2>11.  Author's Address</h2></a>

   Christophe Kalt
   99 Teaneck Rd, Apt #117
   Ridgefield Park, NJ 07660
   USA

   EMail: kalt@stealth.net
	<a name="section-12"><h2>12.   Full Copyright Statement</h2></a>

   Copyright (C) The Internet Society (2000).  All Rights Reserved.<br>

</p><p class="rfcparagraph">   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

</p><p class="rfcparagraph">   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

</p><p class="rfcparagraph">   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

</p><p class="rfcparagraph">Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.

</p>

















Kalt                         Informational                     [Page 10]


      </td>
      <td class=code>
        <div class='highlight'>
            <!--
            <b>Related Stack Overflow questions:</b>
            <ul>
                
            </ul>
            -->
        </div>
      </td>
    </tr>
  </table>
</div>
</body>