<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title></title>
  <link rel="stylesheet" href="static/css/rfc.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1></h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-'>
      <td class=docs>
        <p class="rfcparagraph">Internet Engineering Task Force (IETF)                          R. Ogier
Request for Comments: 7038                             SRI International
Updates: 5614                                               October 2013
Category: Experimental
ISSN: 2070-1721


            Use of OSPF-MDR in Single-Hop Broadcast Networks

<h2>Abstract</h2>

   RFC 5614 (OSPF-MDR) extends OSPF to support mobile ad hoc networks
   (MANETs) by specifying its operation on the new OSPF interface of
   type MANET.  This document describes the use of OSPF-MDR (MANET
   Designated Router) in a single-hop broadcast network, which is a
   special case of a MANET in which each router is a (one-hop) neighbor
   of each other router.  Unlike an OSPF broadcast interface, such an
   interface can have a different cost associated with each neighbor.
   The document includes configuration recommendations and simplified
   mechanisms that can be used in single-hop broadcast networks.

</p><p class="rfcparagraph">Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for examination, experimental implementation, and
   evaluation.

</p><p class="rfcparagraph">   This document defines an Experimental Protocol for the Internet
   community.  This document is a product of the Internet Engineering
   Task Force (IETF).  It represents the consensus of the IETF
   community.  It has received public review and has been approved for
   publication by the Internet Engineering Steering Group (IESG).  Not
   all documents approved by the IESG are a candidate for any level of
   Internet Standard; see Section 2 of RFC 5741.

</p><p class="rfcparagraph">   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   http://www.rfc-editor.org/info/rfc7038.
<h2>Copyright Notice</h2>

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

</p><p class="rfcparagraph">   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

</p><p class="rfcparagraph">	<a name="section-1"><h2>1.   Introduction</h2></a>

   OSPF-MDR [RFC5614] specifies an extension of OSPF [RFC2328, RFC5340]
   to support mobile ad hoc networks (MANETs) by specifying its
   operation on the new OSPF interface of type MANET.  OSPF-MDR
   generalizes the Designated Router (DR) to a connected dominating set
   (CDS) consisting of a typically small subset of routers called MANET
   Designated Routers (MDRs).  Similarly, the Backup Designated Router
   (BDR) is generalized to a subset of routers called Backup MDRs
   (BMDRs).  MDRs achieve scalability in MANETs similar to the way DRs
   achieve scalability in broadcast networks:

</p><p class="rfcparagraph">   o  MDRs have primary responsibility for flooding the Link State
      Advertisements (LSAs). Backup MDRs provide backup flooding when
      MDRs temporarily fail.

</p><p class="rfcparagraph">   o  MDRs allow the number of adjacencies to be dramatically reduced by
      requiring adjacencies to be formed only between MDR/BMDR routers
      and their neighbors.

</p><p class="rfcparagraph">   In addition, OSPF-MDR has the following features:

</p><p class="rfcparagraph">   o  MDRs and BMDRs are elected based on information obtained from
      modified Hello packets received from neighbors.

</p><p class="rfcparagraph">   o  If adjacency reduction is used (the default), adjacencies are
      formed between MDRs so as to form a connected subgraph.  An option
      (AdjConnectivity = 2) allows for additional adjacencies to be
      formed between MDRs/BMDRs to produce a biconnected subgraph.

</p><p class="rfcparagraph">   o  Each non-MDR router becomes adjacent with an MDR called its
      Parent, and optionally (if AdjConnectivity = 2) becomes adjacent
      with another MDR or BMDR called its Backup Parent.
   o  Each router advertises connections to its neighbor routers as
      point-to-point links in its router-LSA.  Network-LSAs are not
      used.

</p><p class="rfcparagraph">   o  In addition to full-topology LSAs, partial-topology LSAs may be
      used to reduce the size of router-LSAs.  Such LSAs are formatted
      as standard LSAs, but advertise links to only a subset of
      neighbors.

</p><p class="rfcparagraph">   o  Optionally, differential Hellos can be used, which reduce overhead
      by reporting only changes in neighbor states.

</p><p class="rfcparagraph">   This document describes the use of OSPF-MDR in a single-hop broadcast
   network, which is a special case of a MANET in which each router is a
   (one-hop) neighbor of each other router.  An understanding of
   [RFC5614] is assumed.  Unlike an OSPF broadcast interface, such an
   interface can have a different cost associated with each neighbor.
   An example use case is when the underlying radio system performs
   layer-2 routing but has a different number of (layer-2) hops to
   (layer-3) neighbors.

</p><p class="rfcparagraph">   The rationale for using this interface type for single-hop broadcast
   networks, instead of a broadcast interface type, is to represent the
   underlying network in a point-to-multipoint manner, allowing each
   router to advertise different costs to different neighbors in its
   router-LSA.  In this sense, this document shows how the OSPF-MDR
   interface type can be configured (and simplified if desired) to
   achieve the same goals as the OSPF Hybrid Broadcast and
   Point-to-Multipoint interface type [RFC6845].

</p><p class="rfcparagraph">   Section 2 describes the operation of OSPF-MDR in a single-hop
   broadcast network with recommended parameter settings.  Section 3
   describes an alternative procedure that may be used to decide which
   neighbors on a single-hop broadcast network to advertise in the
   router-LSA.  Section 4 describes a simplified version of the MDR
   selection algorithm for single-hop networks.

</p><p class="rfcparagraph">   The alternative procedure of Section 3 and the simplified algorithm
   of Section 4 are optional and MUST NOT be used if it is possible for
   two routers in the network to be more than one hop from each other.

</p><p class="rfcparagraph">	<a name="section-1.1"><h3>1.1   Terminology</h3></a>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].
	<a name="section-2"><h2>2.   Operation in a Single-Hop Broadcast Network</h2></a>

   When OSPF-MDR is used in a single-hop broadcast network, the
   following parameter settings and options (defined in [RFC5614])
   should be used:

</p><p class="rfcparagraph">   o  AdjConnectivity SHOULD be equal to 2 (biconnected); this provides
      the smoothest transition when one router replaces another as MDR,
      since the set of adjacencies forms a biconnected network that
      remains connected during the transition.

</p><p class="rfcparagraph">   o  AdjConnectivity MAY be equal to 1 (uniconnected), resulting in a
      slightly less smooth transition, since adjacencies must be formed
      between the new MDR and all of its neighbors.

</p><p class="rfcparagraph">   o  AdjConnectivity SHOULD NOT be equal to 0 (full topology), since
      this requires adjacencies to be formed between all pairs of
      routers, adding unnecessary message overhead.

</p><p class="rfcparagraph">   o  An adjacency SHOULD be eliminated if neither the router nor the
      neighbor is an MDR or BMDR (see Section 7.3 of [RFC5614]).

</p><p class="rfcparagraph">   o  LSAFullness MUST be equal to 4 or 5 if full-topology LSAs are
      required. (The value 5 is defined in Section 3 of this document.)

   o  LSAFullness MAY be equal to 1 (min-cost LSAs) if full-topology
      LSAs are not required.  This option reduces the number of
      advertised links while still providing shortest paths.

</p><p class="rfcparagraph">   If AdjConnectivity equals 1 or 2 and full-topology LSAs are used,
   OSPF-MDR running on a single-hop broadcast network has the following
   properties:

</p><p class="rfcparagraph">   o  A single MDR is selected, which becomes adjacent with every other
      router, as in an OSPF broadcast network.

</p><p class="rfcparagraph">   o  Two BMDRs are selected.  This occurs because the MDR selection
      algorithm ensures that the MDR/BMDR backbone is biconnected.  If
      AdjConnectivity = 2, every non-MDR/BMDR router becomes adjacent
      with one of the BMDRs in addition to the MDR.

</p><p class="rfcparagraph">   o  When all adjacencies are fully adjacent, the router-LSA for each
      router includes point-to-point (type 1) links to all bidirectional
      neighbors (in state 2-Way or greater).
	<a name="section-3"><h2>3.   Originating Router-LSAs</h2></a>

   A router running OSPF-MDR with LSAFullness = 4 includes in its
   router-LSA point-to-point (type 1) links for all fully adjacent
   neighbors, and for all bidirectional neighbors that are routable.  A
   neighbor is routable if the SPF calculation has produced a route to
   the neighbor and a flexible quality condition is satisfied.

</p><p class="rfcparagraph">   This section describes an alternative procedure that MAY be used
   instead of the procedure described in Section 6 of [RFC5614], to
   decide which neighbors on a single-hop broadcast network to advertise
   in the router-LSA.  The alternative procedure will correspond to
   LSAFullness = 5, and is interoperable with the other choices for
   LSAFullness.  This procedure avoids the need to check whether a
   neighbor is routable, and thus avoids having to update the set of
   routable neighbors.

</p><p class="rfcparagraph">   If LSAFullness = 5, then the Selected Advertised Neighbor Set (SANS)
   is the same as specified for LSAFullness = 4, and the following steps
   are performed instead of the first paragraph of Section 9.4 in
   [RFC5614].

</p><p class="rfcparagraph">   (1) The MDR includes in its router-LSA a point-to-point (type 1) link<br>
       for each fully adjacent neighbor.  (Note that the MDR becomes
       adjacent with all of its neighbors.)

   (2) Each non-MDR router includes in its router-LSA a point-to-point<br>
       link for each fully adjacent neighbor, and, if the router is
       fully adjacent with the MDR, for each bidirectional neighbor j
       such that the MDR's router-LSA includes a link to j.

</p><p class="rfcparagraph">   To provide rationale for the above procedure, let i and j be two
   non-MDR routers.  Since the SPF calculation (Section 16.1 of
   [RFC2328]) allows router i to use router j as a next hop only if
   router j advertises a link back to router i, routers i and j must
   both advertise a link to each other in their router-LSAs before
   either can use the other as a next hop.  Therefore, the above
   procedure for non-MDR routers (Step 2) implies there must exist a
   path of fully adjacent links between i and j (via the MDR) in both
   directions before this can happen.  The above procedure for non-MDR
   routers is similar to one described in Section 4.6 of [RFC6845] for
   non-DR routers.
	<a name="section-4"><h2>4.   MDR Selection Algorithm</h2></a>

   The MDR selection algorithm of [RFC5614] simplifies as follows in
   single-hop networks.  The resulting algorithm is similar to the DR
   election algorithm of OSPF, but is slightly different (e.g., two
   Backup MDRs are selected).  The following simplified algorithm is
   interoperable with the full MDR selection algorithm.

</p><p class="rfcparagraph">   Note that lexicographic order is used when comparing tuples of the
   form (RtrPri, MDR Level, RID).  Also note that each router will form
   adjacencies with its Parents and dependent neighbors.  In the
   following, the term "neighbor" refers to a bidirectional neighbor (in
   state 2-Way or greater).

</p><p class="rfcparagraph">   Phase 1: Creating the neighbor connectivity matrix is not required.

</p><p class="rfcparagraph">   Phase 2: MDR Selection

   (2.1) The set of Dependent Neighbors is initialized to be empty.

</p><p class="rfcparagraph">   (2.2) If the router has a larger value of (RtrPri, MDR Level, RID)
         than all of its (bidirectional) neighbors, the router selects
         itself as an MDR; selects its BMDR neighbors as Dependent
         Neighbors if AdjConnectivity = 2; then proceeds to Phase 4.

</p><p class="rfcparagraph">   (2.3) Otherwise, if the router's MDR Level is currently MDR, then it
         is changed to BMDR before executing Phase 3.

</p><p class="rfcparagraph">   Phase 3: Backup MDR Selection

   (3.1) Let Rmax be the neighbor with the largest value of (RtrPri, MDR
         Level, RID).

</p><p class="rfcparagraph">   (3.2) Determine whether or not there exist two neighbors, other than
         Rmax, with a larger value of (RtrPri, MDR Level, RID) than the
         router itself.

</p><p class="rfcparagraph">   (3.3) If there exist two such neighbors, then the router sets its MDR
         Level to MDR Other.

</p><p class="rfcparagraph">   (3.4) Else, the router sets its MDR Level to BMDR, and if
         AdjConnectivity = 2, adds Rmax and its MDR/BMDR neighbors as
         Dependent Neighbors.

</p><p class="rfcparagraph">   (3.5) If steps 3.1 through 3.4 resulted in the MDR Level changing
         from MDR Other to BMDR, then execute Step 2.2 again before
         proceeding to Phase 4.  (This is necessary because running Step
         2.2 again can cause the MDR Level to change to MDR.)
   Phase 4: Parent Selection

   Each router selects a Parent and (if AdjConnectivity = 2) a Backup
   Parent for the single-hop broadcast network.  The Parent for a
   non-MDR router will be the MDR.  The Backup Parent for an MDR Other,
   if it exists, will be a BMDR.  Each non-MDR router becomes adjacent
   with its Parent and its Backup Parent, if it exists.  The Parent
   selection algorithm is already simple, so a simplified version is not
   given here.

</p><p class="rfcparagraph">   The Parent and Backup Parent are analogous to the Designated Router
   and Backup Designated Router interface data items in OSPF.  As in
   OSPF, these are advertised in the DR and Backup DR fields of each
   Hello sent on the interface.

</p><p class="rfcparagraph">	<a name="section-5"><h2>5.   Security Considerations</h2></a>

   This document describes the use of OSPF-MDR in a single-hop broadcast
   network, and raises no security issues in addition to those already
   covered in [RFC5614].

</p><p class="rfcparagraph">	<a name="section-6"><h2>6.   Normative References</h2></a>

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

</p><p class="rfcparagraph">   [RFC2328]  Moy, J., "OSPF Version 2", STD 54, RFC 2328, April 1998.

</p><p class="rfcparagraph">   [RFC5340]  Coltun, R., Ferguson, D., Moy, J., and A. Lindem, "OSPF
              for IPv6", RFC 5340, July 2008.

</p><p class="rfcparagraph">   [RFC5614]  Ogier, R. and P. Spagnolo, "Mobile Ad Hoc Network (MANET)
              Extension of OSPF Using Connected Dominating Set (CDS)
              Flooding", RFC 5614, August 2009.

</p><p class="rfcparagraph">	<a name="section-7"><h2>7.   Informative References</h2></a>

   [RFC6845]  Sheth, N., Wang, L., and J. Zhang, "OSPF Hybrid Broadcast
              and Point-to-Multipoint Interface Type", RFC 6845, January
              2013.

</p>Author's Address

   Richard G. Ogier
   EMail: ogier@earthlink.net






Ogier                         Experimental                      [Page 7]


      </td>
      <td class=code>
        <div class='highlight'>
            <!--
            <b>Related Stack Overflow questions:</b>
            <ul>
                
            </ul>
            -->
        </div>
      </td>
    </tr>
  </table>
</div>
</body>